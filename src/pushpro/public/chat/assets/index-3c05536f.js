import{d as ke,r as v,w as le,e as xe,o as we,f as re,R as i,S as c,a2 as e,c as h,a4 as f,a6 as g,W as Ce,L as _e,F as se,a7 as oe,a3 as Q,a8 as S,k as F,a5 as ae,aa as ye,H as et,n as tt,ab as lt,ac as st}from"./vue-f337fce5.js";import{d as ot,a as at,n as rt}from"./index-e8e306c5.js";import{S as nt,a as it,b as ct,d as dt,e as ut,h as vt,m as ht,i as ft,j as mt,u as be,k as gt}from"./xhs-06219a15.js";import{_ as Ie}from"./_plugin-vue_export-helper-c27b6911.js";import"./naive-ui-5426aa23.js";import"./vueuse-motion-2f7a1d90.js";import"./index-ac008ee1.js";function pt(){return fetch("/api/xhs-auto/template",{method:"GET",credentials:"include"}).then(b=>{var B;if(!b.ok)throw new Error(`下载模板失败，服务器返回: ${b.status}`);if(!((B=b.headers.get("content-type"))!=null&&B.includes("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")))throw new Error("下载模板失败：返回内容类型不正确");return b.blob()})}const a=b=>(lt("data-v-40e3fc7f"),b=b(),st(),b),xt={class:"xhs-notes-container"},wt={class:"notes-header"},_t={key:0,class:"mb-4 flex justify-between items-center bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},yt={class:"flex items-center"},bt=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),kt={class:"text-lg font-medium text-gray-800 dark:text-gray-200"},Ct={key:0,class:"inline-block w-24 h-6 bg-gray-200 dark:bg-gray-700 animate-pulse rounded"},It={key:1,class:"flex items-center"},Mt={key:0,class:"ml-2 text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full"},zt=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),At={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},Lt={class:"search-box flex items-center w-full sm:w-auto"},Bt=["value"],Vt={class:"flex flex-wrap gap-2 justify-end w-full sm:w-auto"},jt=a(()=>e("span",{class:"hidden sm:inline"},"查看活动二维码",-1)),Pt=a(()=>e("span",{class:"sm:hidden"},"笔记二维码",-1)),$t=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),Ut=a(()=>e("span",{class:"hidden sm:inline"},"Excel导入",-1)),Ht=a(()=>e("span",{class:"sm:hidden"},"导入",-1)),Et=[$t,Ut,Ht],St=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Dt=a(()=>e("span",{class:"hidden sm:inline"},"添加笔记",-1)),Rt=a(()=>e("span",{class:"sm:hidden"},"添加",-1)),Tt=[St,Dt,Rt],Nt={class:"flex items-center text-sm text-gray-500 mb-4"},Ft={class:"flex items-center"},Xt=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)),qt={class:"ml-4 flex items-center"},Gt=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z","clip-rule":"evenodd"})],-1)),Ot=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 100-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1)),Qt={class:"notes-list"},Wt={key:0,class:"text-center py-10"},Jt=a(()=>e("div",{class:"spinner"},null,-1)),Kt=a(()=>e("p",{class:"mt-2 text-gray-500"},"加载中...",-1)),Yt=[Jt,Kt],Zt={key:1,class:"text-center py-10"},el=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),tl=a(()=>e("p",{class:"text-gray-500 mt-4"},"暂无笔记",-1)),ll=a(()=>e("p",{class:"text-gray-500 mt-2"},' 点击"添加笔记"按钮创建您的第一条笔记 ',-1)),sl=[el,tl,ll],ol={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"},al=["onClick"],rl={class:"note-card-header relative"},nl=["src"],il={class:"absolute top-2 left-2 flex flex-col space-y-1"},cl={key:0,class:"px-2 py-1 text-xs rounded-full platform-label xhs",title:"小红书已发布"},dl=a(()=>e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]),h(" 小红书 ")],-1)),ul=[dl],vl={key:1,class:"px-2 py-1 text-xs rounded-full platform-label douyin",title:"抖音已发布"},hl=a(()=>e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]),h(" 抖音 ")],-1)),fl=[hl],ml={class:"note-card-body p-4"},gl={class:"font-bold text-lg mb-1 truncate"},pl={class:"text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2"},xl={class:"note-card-footer flex justify-between items-center text-sm text-gray-500"},wl={class:"flex items-center"},_l=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1)),yl={class:"relative action-container"},bl=["onClick"],kl=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)),Cl=a(()=>e("span",{class:"ml-1"},"操作",-1)),Il=[kl,Cl],Ml=["onClick"],zl=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 text-purple-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 100 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),Al=["onClick"],Ll=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),Bl=["onClick"],Vl=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 text-black",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),jl=["onClick"],Pl=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),$l=["onClick"],Ul=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 text-red-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),Hl={key:0,class:"fixed inset-0 modal-container flex items-center justify-center z-50"},El={class:"bg-white dark:bg-gray-800 modal-content w-full max-w-xl p-6 max-h-90vh overflow-y-auto"},Sl={class:"flex justify-between items-center mb-5"},Dl=a(()=>e("h2",{class:"text-xl font-bold flex items-center text-gray-800 dark:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),h(" 添加小红书笔记 ")],-1)),Rl=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Tl=[Rl],Nl={class:"form-group mb-5"},Fl=a(()=>e("label",{class:"block mb-2 font-medium text-gray-700 dark:text-white"},"标题",-1)),Xl={class:"form-group mb-5"},ql=a(()=>e("label",{class:"block mb-2 font-medium text-gray-700 dark:text-white"},"内容",-1)),Gl={class:"form-group mb-5"},Ol=a(()=>e("label",{class:"block mb-2 font-medium text-gray-700 dark:text-white"},"类型",-1)),Ql={class:"flex gap-4"},Wl={class:"flex items-center text-gray-700 dark:text-gray-200"},Jl=a(()=>e("span",null,"图文",-1)),Kl={class:"flex items-center text-gray-700 dark:text-gray-200"},Yl=a(()=>e("span",null,"视频",-1)),Zl={class:"form-group mb-5"},es={class:"flex justify-between items-center mb-4"},ts={class:"flex items-center"},ls=a(()=>e("label",{class:"font-medium text-gray-700 dark:text-white"},"图片",-1)),ss={class:"ml-2 text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full"},os={class:"flex items-center space-x-2"},as=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),rs=["disabled"],ns=["disabled"],is=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),cs={class:"image-slots-container"},ds={class:"flex items-center mb-2"},us={class:"image-index-badge"},vs=["onUpdate:modelValue"],hs=["title"],fs=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)),ms=["onChange"],gs=["onClick","title"],ps=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),xs=[ps],ws={key:0,class:"flex items-center"},_s={class:"image-preview"},ys=["src"],bs=a(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," 支持JPG/PNG/GIF/WEBP格式，单张图片不超过5MB，最多上传9张图片 ",-1)),ks={class:"flex justify-end"},Cs=["disabled"],Is=["disabled"],Ms={key:0,class:"flex items-center"},zs=a(()=>e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),As={key:1,class:"flex items-center"},Ls=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),Bs={key:1,class:"fixed inset-0 modal-container flex items-center justify-center z-50"},Vs={class:"bg-white dark:bg-gray-800 modal-content w-full max-w-5xl p-4 h-90vh"},js=a(()=>e("h2",{class:"text-xl font-bold flex items-center text-gray-800 dark:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]),h(" 笔记详情 ")],-1)),Ps=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),$s=[Ps],Us={class:"relative w-full h-full",style:{height:"calc(90vh - 70px)"}},Hs=["src"],Es={key:2,class:"fixed inset-0 modal-container flex items-center justify-center z-50"},Ss={class:"bg-white dark:bg-gray-800 modal-content w-full max-w-md p-6 rounded-lg"},Ds=a(()=>e("h2",{class:"text-xl font-bold flex items-center text-gray-800 dark:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 6h1m-7 7v1m-6-6H4"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5h16a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V6a1 1 0 011-1z"})]),h(" 分享二维码 ")],-1)),Rs=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Ts=[Rs],Ns={class:"qrcode-container"},Fs={class:"text-center mb-2 font-medium text-gray-700 dark:text-gray-300"},Xs={class:"qrcode-wrapper mb-6"},qs=["src"],Gs=a(()=>e("div",{class:"mt-4 text-xs text-center text-gray-500 dark:text-gray-400 mb-4"}," 扫描上方二维码或复制以下链接分享 ",-1)),Os={class:"share-link-container bg-gray-100 dark:bg-gray-700 p-3 rounded-md mb-5"},Qs={class:"text-sm text-gray-700 dark:text-gray-300 truncate"},Ws=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})],-1)),Js={key:3,class:"fixed inset-0 modal-container flex items-center justify-center z-50"},Ks={class:"bg-white dark:bg-gray-800 modal-content w-full max-w-md p-6 rounded-lg"},Ys={class:"flex justify-between items-center mb-4"},Zs=a(()=>e("h2",{class:"text-xl font-bold flex items-center text-gray-800 dark:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),h(" Excel批量导入 ")],-1)),eo=["disabled"],to=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),lo=[to],so={class:"import-container"},oo={key:0,class:"text-center py-6"},ao=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),ro=a(()=>e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"选择Excel文件批量导入笔记",-1)),no={class:"mt-6 flex flex-col items-center"},io={class:"file-select-btn mb-4"},co=a(()=>e("span",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a3 3 0 00-3 3v4a3 3 0 006 0V7a1 1 0 112 0v4a5 5 0 01-10 0V7a5 5 0 0110 0v4a1 1 0 11-2 0V7a3 3 0 00-3-3z","clip-rule":"evenodd"})]),h(" 选择Excel文件 ")],-1)),uo=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),vo={key:1,class:"py-4"},ho={class:"selected-file bg-gray-50 dark:bg-gray-700 p-4 rounded-md mb-5 flex items-center"},fo=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-green-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),mo={class:"flex-1 truncate"},go={class:"font-medium text-gray-800 dark:text-white truncate"},po={class:"text-xs text-gray-500 dark:text-gray-400"},xo=["disabled"],wo=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)),_o=[wo],yo={key:0,class:"mb-5"},bo={class:"text-sm text-gray-600 dark:text-gray-400 mb-2 flex justify-between"},ko=a(()=>e("span",null,"导入进度",-1)),Co={class:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"},Io={class:"flex justify-between"},Mo=["disabled"],zo=["disabled"],Ao={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Lo=a(()=>e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),Bo=a(()=>e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),Vo=[Lo,Bo],jo={key:2,class:"py-4"},Po={class:"import-result text-center"},$o={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12",viewBox:"0 0 20 20",fill:"currentColor"},Uo=a(()=>e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)),Ho=[Uo],Eo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12",viewBox:"0 0 20 20",fill:"currentColor"},So=a(()=>e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)),Do=[So],Ro={class:"text-lg font-medium mb-4 text-gray-800 dark:text-white"},To={class:"result-stats grid grid-cols-3 gap-4 mb-6"},No={class:"stat-item bg-gray-50 dark:bg-gray-700 p-3 rounded-md"},Fo={class:"text-xl font-bold text-gray-800 dark:text-white"},Xo=a(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"总条数",-1)),qo={class:"stat-item bg-green-50 dark:bg-green-900 p-3 rounded-md"},Go={class:"text-xl font-bold text-green-600 dark:text-green-300"},Oo=a(()=>e("div",{class:"text-xs text-green-500 dark:text-green-400"},"成功",-1)),Qo={class:"stat-item bg-red-50 dark:bg-red-900 p-3 rounded-md"},Wo={class:"text-xl font-bold text-red-600 dark:text-red-300"},Jo=a(()=>e("div",{class:"text-xs text-red-500 dark:text-red-400"},"失败",-1)),Ko={key:0,class:"error-details mb-5"},Yo=a(()=>e("div",{class:"text-sm font-medium text-red-500 dark:text-red-400 mb-2 text-left"},"错误详情：",-1)),Zo={class:"errors-box bg-red-50 dark:bg-red-900/30 p-3 rounded-md text-left max-h-40 overflow-y-auto text-sm"},ea={class:"flex justify-center space-x-4"},ta=ke({__name:"index",props:{activityId:{type:String,default:null}},setup(b){const B=ot(),D=at(),V=v(!1),z=v(!1);v(null);const R=v(""),j=v(!1),k=v(0),A=v([]),$=v([]),X=v(!1),d=v(null),p=v(null),U=v(!0),T=b;function W(){return new URLSearchParams(window.location.search).get("activityId")}le(()=>T.activityId,s=>{s&&(U.value=!0,d.value=s,X.value&&Ae())},{immediate:!0});const J=v(!1),q=v(null),Me=xe(()=>q.value?`/chat#/xhs-auto-api?id=${q.value}`:""),K=v(!1),P=v(null),ze=xe(()=>P.value?`https://xhs.aivip1.top/api/html-render/qrcode?data=${encodeURIComponent(`${window.location.origin}/chat#/xhs-auto-api?id=${P.value.id}`)}`:""),Y=v(!1),C=v(null),L=v(!1),H=v(0),m=v(null);console.log("Notes组件创建, 用户信息:",B.userInfo);const n=v({title:"",content:"",type:"normal",images:[""]}),ne=[],y=v(!0),t=window==null?void 0:window.$message;le(k,()=>{ue(!0)});function ie(){const s=new AbortController;return ne.push(s),s}function Ae(){k.value+=1}function Le(){D.showApp({id:"xhs-activities",name:"小红书活动类型",type:"built-in",path:"xhs-activities"}),localStorage.removeItem("currentActivityId"),window.$message&&window.$message.success("已返回活动列表")}async function ce(){if(!X.value){if(X.value=!0,V.value=!1,A.value=[],$.value=[],d.value=null,p.value=null,U.value=!0,T.activityId)d.value=T.activityId,localStorage.setItem("currentActivityId",T.activityId);else{const s=W();if(s)d.value=s,localStorage.setItem("currentActivityId",s);else{const l=localStorage.getItem("currentActivityId");l&&(d.value=l)}}d.value&&await de(d.value),await tt();try{await ue(!0)}catch{t==null||t.error("加载笔记失败，请手动刷新")}}}setTimeout(()=>ce(),0);async function de(s){U.value=!0;try{if(s==="default"){console.log("当前是默认活动"),p.value="日常使用",U.value=!1;return}console.log("获取活动详情, ID:",s);const l=await it(s);if(console.log("活动详情响应:",l),l&&l.data)p.value=l.data.name||"未命名活动",console.log("设置活动名称为:",p.value);else if(l&&typeof l=="object"){const o=l;o.name?p.value=o.name:o.data&&o.data.data&&o.data.data.name?p.value=o.data.data.name:p.value=`活动 ${s}`,console.log("从不同层级获取到活动名称:",p.value)}else p.value=`活动 ${s}`,console.log("无法获取活动名称，使用默认值:",p.value)}catch(l){console.error("获取活动详情失败:",l),p.value=s==="default"?"日常使用":`活动 ${s}`}finally{U.value=!1}}async function ue(s=!1){if(y.value&&!(V.value&&!s))try{V.value=!0;const l=ie();try{let o;const x=W();if(x)d.value=x,localStorage.setItem("currentActivityId",x);else if(!d.value){const r=localStorage.getItem("currentActivityId");r&&(d.value=r)}const I=d.value==="default";if(d.value&&!I?(await de(d.value),o=await ct(d.value),document.title=p.value?`小红书笔记 - ${p.value}`:`小红书笔记 - 活动 ${d.value}`):(o=await dt({isUsed:void 0}),I?(p.value="日常使用",document.title="小红书笔记 - 日常使用"):(document.title="小红书笔记",p.value=null),U.value=!1),!y.value)return;if(o&&o.data){let r;Array.isArray(o.data)?r=o.data:o.data.data&&Array.isArray(o.data.data)?r=o.data.data:o.data.data&&o.data.data.data&&Array.isArray(o.data.data.data)?r=o.data.data.data:r=[o.data],A.value=r,N()}else t==null||t.error("获取笔记列表失败: 无数据返回"),A.value=[],N()}catch(o){if(o.name==="AbortError")return;t==null||t.error("获取笔记失败，请稍后重试"),A.value=[],N()}}finally{y.value?V.value=!1:console.log("获取笔记列表流程完成，但组件已卸载")}}const Be=async()=>{if(!z.value)try{if(!n.value.title.trim()&&!n.value.content.trim()){t==null||t.error("标题和内容至少填写一项");return}const s=n.value.images.filter(x=>x.trim()!==""),l={title:n.value.title.trim(),content:n.value.content.trim(),images:s,type:n.value.type};console.log("当前活动ID信息:",{activityIdValue:d.value,activityIdType:typeof d.value,propsActivityId:T.activityId,urlActivityId:W(),localStorageActivityId:localStorage.getItem("currentActivityId")});let o={...l};d.value&&d.value!=="default"?(o.activityId=d.value,console.log("使用正常活动ID:",d.value)):d.value==="default"?console.log('当前是默认活动"日常使用"，创建无关联笔记'):console.log("没有活动ID，将创建独立笔记"),console.log("准备发送创建笔记请求:",o),await Ve(o)}catch(s){console.error("提交笔记异常:",s),t==null||t.error("创建失败，请稍后重试")}finally{z.value=!1}};async function Ve(s){z.value=!0;const l={...n.value};j.value=!1;try{const o=await ut(s);console.log("创建笔记响应:",o),o&&o.data?(t==null||t.success("创建笔记成功"),n.value={title:"",content:"",images:[""],type:"normal"},k.value+=1):(j.value=!0,n.value=l,console.error("创建笔记失败: 无数据返回"),t==null||t.error("创建失败，请稍后重试"))}catch(o){console.error("创建笔记出错:",o),t==null||t.error("创建失败: "+(o.message||"请稍后重试")),j.value=!0,n.value=l}}async function je(s){if(confirm("确定要删除此笔记吗？")&&y.value)try{const l=ie(),o=await vt(Number(s));if(!y.value)return;o&&o.data?(t==null||t.success("删除成功"),M.value=null,A.value=A.value.filter(x=>x.id!==s),k.value+=1,N()):t==null||t.error("删除失败: 请稍后重试")}catch{t==null||t.error("删除失败，请稍后重试")}}async function Pe(s){if(y.value)try{const l=await ht(Number(s));if(!y.value)return;t==null||t.success("已标记为已使用"),M.value=null,k.value+=1}catch(l){console.error("标记笔记已使用失败",l),t==null||t.error("操作失败，请稍后重试")}}async function $e(s){if(confirm("确定要将此笔记标记为弃用吗？")&&y.value)try{const l=await ft(Number(s));if(!y.value)return;t==null||t.success("已标记为弃用"),M.value=null,k.value+=1}catch(l){console.error("标记笔记为弃用失败",l),t==null||t.error("操作失败，请稍后重试")}}async function Ue(s){if(y.value)try{const l=await mt(Number(s));if(!y.value)return;t==null||t.success("已标记为抖音已使用"),M.value=null,k.value+=1}catch(l){console.error("标记笔记为抖音已使用失败",l),t==null||t.error("操作失败，请稍后重试")}}const He=async()=>{k.value+=1};function N(){try{if(!R.value){$.value=[...A.value];return}const s=R.value.toLowerCase();$.value=A.value.filter(l=>String(l.title||"").toLowerCase().includes(s)||String(l.content||"").toLowerCase().includes(s))}catch{$.value=[]}}function Ee(s){const l=s.target;R.value=l.value,N()}const ve=()=>{n.value.images.length<9&&n.value.images.push("")},Se=s=>{n.value.images.splice(s,1)};le(j,s=>{s&&(n.value={title:"",content:"",images:[""],type:"normal"})}),we(()=>{y.value=!1,ne.forEach(s=>{try{s.abort()}catch(l){console.error("取消请求失败:",l)}}),console.log("Notes组件卸载完成")});function De(s){if(!s)return"";if(s.cover)return s.cover;if(s.images&&s.images.length>0&&s.images[0]){if(typeof s.images[0]=="string")return s.images[0];if(typeof s.images[0]=="object"&&s.images[0].url)return s.images[0].url}return""}function Z(s){const l=s.target;l&&l instanceof HTMLImageElement&&(l.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 300 200"%3E%3Crect width="300" height="200" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" font-family="Arial" font-size="16" fill="%23999" text-anchor="middle" dominant-baseline="middle"%3E暂无图片%3C/text%3E%3C/svg%3E')}function Re(s){if(!s)return"未知日期";try{return new Date(s).toLocaleDateString()}catch{return"未知日期"}}const Te=()=>{j.value=!0};function Ne(s){q.value=s.id,J.value=!0}function Fe(){J.value=!1,q.value=null}function Xe(s,l){const o=l.target;o.closest("button")||o.closest(".action-menu")||Ne(s)}re(()=>{y.value=!0,(!X.value||A.value.length===0)&&ce()});async function qe(s){const l=s.target;if(!l.files||l.files.length===0)return;const o=Array.from(l.files),I=9-n.value.images.filter(w=>w.trim()!=="").length;if(I<=0){t==null||t.warning("已达到最大上传数量(9张)，无法继续上传"),l&&(l.value="");return}o.length>I&&(t==null||t.warning(`最多还能添加${I}张图片`),o.splice(I));const r=["image/jpeg","image/png","image/gif","image/webp"],u=5*1024*1024;z.value=!0,t==null||t.info(`正在上传${o.length}张图片...`);try{for(;n.value.images.length<9&&n.value.images.filter(_=>_==="").length<o.length;)ve();const w=n.value.images.map((_,te)=>_===""?te:-1).filter(_=>_!==-1).slice(0,o.length),ee=o.map(async(_,te)=>{const E=w[te];if(!r.includes(_.type))return console.warn(`文件 ${_.name} 不是支持的图片格式`),null;if(_.size>u)return console.warn(`文件 ${_.name} 超过5MB大小限制`),null;try{const pe=URL.createObjectURL(_);n.value.images[E]=pe;const O=await be(_);if(O&&O.data){const Ze=O.data.url||O.data;return n.value.images[E]=Ze,{success:!0,index:E}}else return n.value.images[E]="",{success:!1,index:E}}catch{return n.value.images[E]="",{success:!1,index:E}}}),G=(await Promise.all(ee)).filter(_=>_&&_.success).length;G>0&&(t==null||t.success(`成功上传${G}张图片`)),G<o.length&&(t==null||t.warning(`${o.length-G}张图片上传失败`))}catch(w){console.error("批量上传出错",w),t==null||t.error("图片上传失败，请稍后重试")}finally{z.value=!1,l&&(l.value="")}}async function Ge(s,l){const o=s.target;if(!o.files||o.files.length===0)return;const x=o.files[0];if(!["image/jpeg","image/png","image/gif","image/webp"].includes(x.type)){t==null||t.error("只支持上传 JPG/PNG/GIF/WEBP 格式的图片");return}const r=5*1024*1024;if(x.size>r){t==null||t.error("图片大小不能超过5MB");return}try{const u=URL.createObjectURL(x);n.value.images[l]=u;const w=await be(x);if(w&&w.data){const ee=w.data.url||w.data;n.value.images[l]=ee,t==null||t.success("图片上传成功")}else n.value.images[l]="",t==null||t.error("图片上传失败")}catch{n.value.images[l]="",t==null||t.error("图片上传失败，请稍后重试")}finally{o&&(o.value="")}}function he(s,l){if(l&&l.stopPropagation(),s)P.value=s;else if(d.value)P.value={id:d.value,title:p.value||"活动二维码"};else{t==null||t.warning("当前没有活动ID或未选择笔记");return}M.value=null,K.value=!0}function Oe(){K.value=!1,P.value=null}function fe(){return P.value?`${window.location.origin}/chat#/xhs-auto-api?identifier=${P.value.id}`:""}function Qe(){const s=fe();navigator.clipboard.writeText(s).then(()=>{t==null||t.success("链接已复制到剪贴板")}).catch(l=>{console.error("复制失败:",l),t==null||t.error("复制失败，请手动复制")})}function We(s){const l=s.target;if(!l.files||l.files.length===0)return;const o=l.files[0];if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(o.type)){t==null||t.error("请上传Excel文件（.xls或.xlsx格式）"),l.value="";return}C.value=o}function me(){Y.value=!1,C.value=null,m.value=null,H.value=0}async function Je(){try{const s=await pt();if(!s||s.size===0){t==null||t.error("下载模板失败：获取到的数据为空");return}const l=window.URL.createObjectURL(s),o=document.createElement("a");o.href=l,o.setAttribute("download","小红书笔记导入模板.xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l),t==null||t.success("模板下载成功")}catch(s){t==null||t.error(s.message||"下载模板失败，请稍后重试")}}async function Ke(){if(!C.value){t==null||t.warning("请先选择Excel文件");return}try{L.value=!0,H.value=10;const s=setInterval(()=>{H.value<90&&(H.value+=Math.floor(Math.random()*10))},500),l=await gt(C.value);if(clearInterval(s),H.value=100,l&&l.data){const o=l.data;m.value={success:o.success||0,fail:o.fail||0,total:o.total||0,errors:o.errors||[]},m.value.success>0&&(t==null||t.success(`成功导入${m.value.success}条笔记`),k.value+=1),m.value.fail>0&&(t==null||t.warning(`${m.value.fail}条笔记导入失败`))}else t==null||t.error("导入失败，请检查文件格式")}catch(s){console.error("导入Excel出错",s),t==null||t.error("导入失败，请稍后重试")}finally{L.value=!1}}const M=v(null);function Ye(s,l){l.stopPropagation(),M.value===s?M.value=null:M.value=s}function ge(s){const l=s.target;!l.closest(".action-menu")&&!l.closest("button")&&(M.value=null)}return re(()=>{document.addEventListener("click",ge)}),we(()=>{document.removeEventListener("click",ge)}),(s,l)=>{var o,x,I;return i(),c("div",xt,[e("div",wt,[d.value?(i(),c("div",_t,[e("div",yt,[bt,e("h2",kt,[U.value?(i(),c("span",Ct)):(i(),c("span",It,[h(" 当前活动: "+f(p.value||(d.value==="default"?"日常使用":d.value))+" ",1),d.value==="default"?(i(),c("span",Mt,"默认")):g("",!0)]))])]),e("button",{onClick:Le,class:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 text-sm flex items-center"},[zt,h(" 返回活动列表 ")])])):g("",!0),e("div",At,[e("div",Lt,[e("input",{type:"text",value:R.value,onInput:Ee,placeholder:"搜索笔记...",class:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white input-field"},null,40,Bt)]),e("div",Vt,[e("button",{onClick:l[0]||(l[0]=r=>he()),class:"flex items-center px-3 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg transition-colors shadow-sm text-sm sm:text-base"},[Ce(_e(nt),{theme:"filled",class:"mr-1 sm:mr-2",size:"16"}),jt,Pt]),e("button",{type:"button",onClick:l[1]||(l[1]=r=>Y.value=!0),class:"import-btn flex items-center px-3 py-2 text-sm sm:text-base"},Et),e("button",{type:"button",onClick:Te,class:"add-note-btn flex items-center px-3 py-2 text-sm sm:text-base"},Tt)])]),e("div",Nt,[e("span",Ft,[Xt,h(" "+f(((x=(o=_e(B))==null?void 0:o.userInfo)==null?void 0:x.username)||"未登录"),1)]),e("span",qt,[Gt,h(" "+f($.value.length),1)]),e("button",{type:"button",onClick:He,class:"ml-2 text-xs text-blue-500 hover:text-blue-600 flex items-center"},[Ot,h(" 刷新 ")])])]),e("div",Qt,[V.value?(i(),c("div",Wt,Yt)):$.value.length===0?(i(),c("div",Zt,sl)):(i(),c("div",ol,[(i(!0),c(se,null,oe($.value,r=>(i(),c("div",{key:`${r.id}-${k.value}`,class:"note-card",onClick:u=>Xe(r,u)},[e("div",rl,[e("img",{src:De(r)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200' viewBox='0 0 300 200'%3E%3Crect width='300' height='200' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='16' fill='%23999' text-anchor='middle' dominant-baseline='middle'%3E暂无图片%3C/text%3E%3C/svg%3E",alt:"Cover",class:"w-full h-40 object-cover",onError:Z},null,40,nl),e("div",{class:Q(["absolute top-2 right-2 px-2 py-1 text-xs rounded-full status-label",r.isDiscarded?"discarded":r.isUsed?"used":"unused"])},f(r.isDiscarded?"已弃用":r.isUsed?"已使用":"未使用"),3),e("div",il,[r.isUsed?(i(),c("div",cl,ul)):g("",!0),r.douyinUsed?(i(),c("div",vl,fl)):g("",!0)])]),e("div",ml,[e("h3",gl,f(r.title||"无标题"),1),e("p",pl,f(r.content||"无内容"),1),e("div",xl,[e("span",wl,[_l,h(" "+f(Re(r.createTime)),1)]),e("div",yl,[e("button",{onClick:u=>Ye(r.id,u),class:"text-gray-500 hover:text-gray-700 flex items-center"},Il,8,bl),M.value===r.id?(i(),c("div",{key:0,class:"action-menu",onClick:l[2]||(l[2]=S(()=>{},["stop"]))},[e("button",{type:"button",onClick:S(u=>he(r,u),["stop"]),class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",title:"显示分享二维码"},[zl,h(" 二维码 ")],8,Ml),!r.isUsed&&!r.isDiscarded?(i(),c("button",{key:0,type:"button",onClick:S(u=>Pe(r.id),["stop"]),class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center"},[Ll,h(" 小红书发布 ")],8,Al)):g("",!0),!r.douyinUsed&&!r.isDiscarded?(i(),c("button",{key:1,type:"button",onClick:S(u=>Ue(r.id),["stop"]),class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center"},[Vl,h(" 抖音发布 ")],8,Bl)):g("",!0),!r.isUsed&&!r.isDiscarded?(i(),c("button",{key:2,type:"button",onClick:S(u=>$e(r.id),["stop"]),class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center"},[Pl,h(" 标记弃用 ")],8,jl)):g("",!0),e("button",{type:"button",onClick:S(u=>je(r.id),["stop"]),class:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center"},[Ul,h(" 删除 ")],8,$l)])):g("",!0)])])])],8,al))),128))]))]),j.value?(i(),c("div",Hl,[e("div",El,[e("div",Sl,[Dl,e("button",{type:"button",onClick:l[3]||(l[3]=r=>j.value=!1),class:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-white transition-colors"},Tl)]),e("div",Nl,[Fl,F(e("input",{"onUpdate:modelValue":l[4]||(l[4]=r=>n.value.title=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white input-field focus:outline-none",placeholder:"输入笔记标题"},null,512),[[ae,n.value.title]])]),e("div",Xl,[ql,F(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=r=>n.value.content=r),rows:"6",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white input-field focus:outline-none",placeholder:"输入笔记内容"},null,512),[[ae,n.value.content]])]),e("div",Gl,[Ol,e("div",Ql,[e("label",Wl,[F(e("input",{type:"radio","onUpdate:modelValue":l[6]||(l[6]=r=>n.value.type=r),value:"normal",class:"mr-2 text-pink-500 focus:ring-pink-500"},null,512),[[ye,n.value.type]]),Jl]),e("label",Kl,[F(e("input",{type:"radio","onUpdate:modelValue":l[7]||(l[7]=r=>n.value.type=r),value:"video",class:"mr-2 text-pink-500 focus:ring-pink-500"},null,512),[[ye,n.value.type]]),Yl])])]),e("div",Zl,[e("div",es,[e("div",ts,[ls,e("span",ss,f(n.value.images.filter(r=>r.trim()!=="").length)+"/9 ",1)]),e("div",os,[e("label",{class:Q(["batch-upload-btn text-xs px-3 py-1 rounded-full flex items-center",{"opacity-50 cursor-not-allowed":n.value.images.filter(r=>r.trim()!=="").length>=9}])},[as,h(" 批量上传 "),e("input",{type:"file",class:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:"",onChange:qe,disabled:n.value.images.filter(r=>r.trim()!=="").length>=9},null,40,rs)],2),e("button",{type:"button",onClick:ve,class:Q(["text-xs bg-pink-50 text-pink-600 dark:bg-pink-900 dark:text-pink-200 px-3 py-1 rounded-full hover:bg-pink-100 dark:hover:bg-pink-800 transition-colors flex items-center",{"opacity-50 cursor-not-allowed":n.value.images.length>=9}]),disabled:n.value.images.length>=9},[is,h(" 添加图片 ")],10,ns)])]),e("div",cs,[(i(!0),c(se,null,oe(n.value.images,(r,u)=>(i(),c("div",{key:`img-${u}-${k.value}`,class:"mb-5 image-upload-item"},[e("div",ds,[e("div",us,f(u+1),1),F(e("input",{"onUpdate:modelValue":w=>n.value.images[u]=w,type:"text",class:"flex-1 px-4 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white input-field focus:outline-none",placeholder:"输入图片URL或上传图片"},null,8,vs),[[ae,n.value.images[u]]]),e("label",{class:"upload-btn ml-2",title:`上传第${u+1}张图片`},[fs,e("input",{type:"file",class:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:w=>Ge(w,u)},null,40,ms)],8,hs),n.value.images.length>1?(i(),c("button",{key:0,type:"button",onClick:w=>Se(u),class:"ml-2 text-red-500 hover:text-red-600 transition-colors",title:`删除第${u+1}张图片`},xs,8,gs)):g("",!0)]),n.value.images[u]?(i(),c("div",ws,[e("div",_s,[e("img",{src:n.value.images[u],class:"h-20 w-20 object-cover",alt:"Preview",onError:Z},null,40,ys)])])):g("",!0)]))),128))]),bs]),e("div",ks,[e("button",{type:"button",onClick:l[8]||(l[8]=r=>j.value=!1),class:"px-5 py-2 border border-gray-300 rounded-md mr-3 hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700 cancel-btn transition-colors text-white",disabled:z.value}," 取消 ",8,Cs),e("button",{type:"button",onClick:Be,class:"px-5 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 submit-btn transition-colors",disabled:z.value},[z.value?(i(),c("span",Ms,[zs,h(" 保存中... ")])):(i(),c("span",As,[Ls,h(" 保存 ")]))],8,Is)])])])):g("",!0),J.value?(i(),c("div",Bs,[e("div",Vs,[e("div",{class:"flex justify-between items-center mb-4"},[js,e("button",{type:"button",onClick:Fe,class:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-white transition-colors"},$s)]),e("div",Us,[e("iframe",{src:Me.value,class:"w-full h-full border-0 rounded-md",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",referrerpolicy:"no-referrer"},null,8,Hs)])])])):g("",!0),K.value?(i(),c("div",Es,[e("div",Ss,[e("div",{class:"flex justify-between items-center mb-4"},[Ds,e("button",{type:"button",onClick:Oe,class:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-white transition-colors"},Ts)]),e("div",Ns,[e("h3",Fs,f(((I=P.value)==null?void 0:I.title)||"分享笔记"),1),e("div",Xs,[e("img",{src:ze.value,alt:"QR Code",class:"qrcode-image mx-auto",onError:Z},null,40,qs)]),Gs,e("div",Os,[e("p",Qs,f(fe()),1)]),e("div",{class:"flex justify-center"},[e("button",{type:"button",onClick:Qe,class:"copy-link-btn flex items-center justify-center px-4 py-2 rounded-md"},[Ws,h(" 复制链接 ")])])])])])):g("",!0),Y.value?(i(),c("div",Js,[e("div",Ks,[e("div",Ys,[Zs,e("button",{type:"button",onClick:me,class:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-white transition-colors",disabled:L.value},lo,8,eo)]),e("div",so,[!C.value&&!m.value?(i(),c("div",oo,[ao,ro,e("div",no,[e("label",io,[co,e("input",{type:"file",class:"hidden",accept:".xls,.xlsx",onChange:We},null,32)]),e("button",{type:"button",onClick:Je,class:"template-btn flex items-center"},[uo,h(" 下载导入模板 ")])])])):C.value&&!m.value?(i(),c("div",vo,[e("div",ho,[fo,e("div",mo,[e("div",go,f(C.value.name),1),e("div",po,f((C.value.size/1024).toFixed(2))+" KB",1)]),e("button",{type:"button",onClick:l[9]||(l[9]=r=>C.value=null),class:"ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:L.value},_o,8,xo)]),L.value?(i(),c("div",yo,[e("div",bo,[ko,e("span",null,f(H.value)+"%",1)]),e("div",Co,[e("div",{class:"bg-green-500 h-2.5 rounded-full",style:et(`width: ${H.value}%`)},null,4)])])):g("",!0),e("div",Io,[e("button",{type:"button",onClick:l[10]||(l[10]=r=>C.value=null),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors",disabled:L.value}," 重新选择 ",8,Mo),e("button",{type:"button",onClick:Ke,class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center",disabled:L.value},[L.value?(i(),c("svg",Ao,Vo)):g("",!0),e("span",null,f(L.value?"导入中...":"开始导入"),1)],8,zo)])])):m.value?(i(),c("div",jo,[e("div",Po,[e("div",{class:Q(["icon-wrapper mx-auto mb-4",m.value.success>0?"success":"error"])},[m.value.success>0?(i(),c("svg",$o,Ho)):(i(),c("svg",Eo,Do))],2),e("h3",Ro,f(m.value.success>0?"导入完成":"导入失败"),1),e("div",To,[e("div",No,[e("div",Fo,f(m.value.total),1),Xo]),e("div",qo,[e("div",Go,f(m.value.success),1),Oo]),e("div",Qo,[e("div",Wo,f(m.value.fail),1),Jo])]),m.value.errors&&m.value.errors.length>0?(i(),c("div",Ko,[Yo,e("div",Zo,[(i(!0),c(se,null,oe(m.value.errors,(r,u)=>(i(),c("div",{key:u,class:"text-red-600 dark:text-red-300 mb-1"},f(r),1))),128))])])):g("",!0),e("div",ea,[e("button",{type:"button",onClick:me,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors"}," 关闭 "),e("button",{type:"button",onClick:l[11]||(l[11]=r=>{C.value=null,m.value=null}),class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors"}," 继续导入 ")])])])):g("",!0)])])])):g("",!0)])}}});const la=Ie(ta,[["__scopeId","data-v-40e3fc7f"]]),sa={class:"redbook-notes-app"},oa=ke({__name:"index",props:{activityId:{type:String,default:void 0}},setup(b){const B=b,D=v(void 0),V=rt();return re(()=>{B.activityId?D.value=B.activityId:V.query.activityId&&(D.value=V.query.activityId)}),(z,R)=>(i(),c("div",sa,[Ce(la,{activityId:D.value},null,8,["activityId"])]))}});const ha=Ie(oa,[["__scopeId","data-v-ef40e31f"]]);export{ha as default};
