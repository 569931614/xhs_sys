import{d as De,r as m,e as J,f as Pe,R as a,S as n,a3 as A,a4 as k,a6 as f,a2 as e,a8 as _,c as C,F as $,k as re,a5 as se,a7 as Q,W as Ne,V as Se,z as Oe,ak as T,n as Ee,ab as qe,ac as Re}from"./vue-f337fce5.js";import{g as fe,p as ye,d as Ke}from"./index-e8e306c5.js";import{_ as Ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./naive-ui-5426aa23.js";import"./vueuse-motion-2f7a1d90.js";function me(b){const g={...b,intellectId:b.intellectId||267};return ye({url:"/image-generator/generate",data:g})}function Je(b,g){let I;return b instanceof FormData?I=b:(I=new FormData,I.append("file",b),g&&I.append("fileName",g)),ye({url:"/image-generator/upload",data:I,headers:{"Content-Type":"multipart/form-data"}})}function Qe(b){return fe({url:"/image-generator/history",data:b})}function We(b){return fe({url:"/image-generator/download",data:{taskId:b}})}const c=b=>(qe("data-v-34045554"),b=b(),Re(),b),Xe={class:"image-generator-container h-full w-full relative overflow-hidden flex flex-col bg-white dark:bg-gray-900 min-h-screen"},Ye={class:"w-full flex justify-end mb-2"},Ze=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),et=[Ze],tt={class:"relative bg-gray-800 rounded-lg overflow-hidden"},ot=["src"],rt=c(()=>e("div",{class:"absolute top-3 right-3 bg-red-500 text-white px-3 py-1 rounded shadow-md flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"1天后自动清理")],-1)),st={class:"mt-4 flex justify-center"},lt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),at={class:"flex-1 overflow-auto p-4 sm:p-6 md:p-8 flex flex-col min-h-0 bg-white dark:bg-gray-900"},nt={class:"max-w-5xl mx-auto w-full flex-1 flex flex-col"},it=T('<div class="mb-8 text-center" data-v-34045554><h1 class="text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-200 flex items-center justify-center" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-34045554></path></svg> AI智能生图，一键生成高质量图片 </h1><p class="mt-2 text-gray-600 dark:text-gray-400" data-v-34045554>输入主题快速生成精美封面</p></div>',1),dt={class:"mb-8"},ct={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mt-2"},ut=T('<div class="w-16 h-16 bg-blue-100 dark:bg-blue-800 rounded-lg flex items-center justify-center mb-3" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-34045554></path></svg></div><h3 class="font-semibold text-gray-800 dark:text-gray-200" data-v-34045554>主题图文模式</h3><p class="text-sm text-gray-500 dark:text-gray-400 text-center mt-1" data-v-34045554>生成精美的主题图文封面</p>',3),gt={key:0,class:"absolute top-2 right-2"},vt=c(()=>e("div",{class:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),ht=[vt],pt=T('<div class="w-16 h-16 bg-pink-100 dark:bg-pink-800 rounded-lg flex items-center justify-center mb-3" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-pink-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-34045554></path></svg></div><h3 class="font-semibold text-gray-800 dark:text-gray-200" data-v-34045554>表情封面模式</h3><p class="text-sm text-gray-500 dark:text-gray-400 text-center mt-1" data-v-34045554>生成醒目的表情风格封面</p>',3),mt={key:0,class:"absolute top-2 right-2"},ft=c(()=>e("div",{class:"w-5 h-5 bg-pink-500 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),yt=[ft],bt=T('<div class="w-16 h-16 bg-green-100 dark:bg-green-800 rounded-lg flex items-center justify-center mb-3" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" data-v-34045554></path></svg></div><h3 class="font-semibold text-gray-800 dark:text-gray-200" data-v-34045554>文案配图模式</h3><p class="text-sm text-gray-500 dark:text-gray-400 text-center mt-1" data-v-34045554>智能文案和图片匹配效果</p>',3),wt={key:0,class:"absolute top-2 right-2"},xt=c(()=>e("div",{class:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),kt=[xt],_t=T('<div class="w-16 h-16 bg-yellow-100 dark:bg-yellow-800 rounded-lg flex items-center justify-center mb-3" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-34045554></path></svg></div><h3 class="font-semibold text-gray-800 dark:text-gray-200" data-v-34045554>备忘录内页</h3><p class="text-sm text-gray-500 dark:text-gray-400 text-center mt-1" data-v-34045554>生成专业备忘录内页样式</p>',3),Ct={key:0,class:"absolute top-2 right-2"},It=c(()=>e("div",{class:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),jt=[It],Mt=T('<div class="w-16 h-16 bg-purple-100 dark:bg-purple-800 rounded-lg flex items-center justify-center mb-3" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2z" data-v-34045554></path></svg></div><h3 class="font-semibold text-gray-800 dark:text-gray-200" data-v-34045554>图片拼图</h3><p class="text-sm text-gray-500 dark:text-gray-400 text-center mt-1" data-v-34045554>上传多张图片制作拼图</p>',3),$t={key:0,class:"absolute top-2 right-2"},Bt=c(()=>e("div",{class:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),Tt=[Bt],zt={class:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Vt={class:"flex items-center text-sm"},Ut=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Lt={class:"text-gray-700 dark:text-gray-300"},At=c(()=>e("span",{class:"font-medium"},"当前模式：",-1)),Ht={class:"mb-6"},Ft=c(()=>e("label",{for:"keyword",class:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-3"},"主题",-1)),Dt={class:"relative"},Pt=c(()=>e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"输入越详细的描述，生成的图片效果越好",-1)),Nt={key:0,class:"mb-6 space-y-4"},St=["for"],Ot={class:"relative"},Et={key:0,class:"w-full"},qt={key:0,class:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4"},Rt={class:"rounded-lg overflow-hidden shadow-sm border border-gray-200 dark:border-gray-700 aspect-square bg-gray-50 dark:bg-gray-800 flex items-center justify-center relative"},Kt=["src","alt"],Gt=c(()=>e("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-40 transition-opacity duration-200"},null,-1)),Jt={class:"absolute bottom-1 left-1 bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shadow-md"},Qt=["onClick"],Wt=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Xt=[Wt],Yt={key:1,class:"flex justify-center"},Zt={key:0,class:"absolute inset-0 flex flex-col items-center justify-center z-10"},eo=T('<div class="w-10 h-10 mb-2" data-v-34045554><svg class="animate-spin w-full h-full text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-34045554><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-34045554></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-34045554></path></svg></div><span class="text-blue-600 font-medium dark:text-blue-400 animate-pulse" data-v-34045554>正在上传图片...</span>',2),to=[eo],oo={key:1,class:"flex flex-col items-center justify-center w-full h-full"},ro=c(()=>e("div",{class:"w-12 h-12 mb-2 text-gray-300 dark:text-gray-600"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),so=c(()=>e("span",{class:"text-gray-600 dark:text-gray-400 text-sm mb-1"},"点击或拖放图片到此处",-1)),lo={class:"text-gray-500 dark:text-gray-500 text-xs"},ao=["disabled"],no={class:"mt-2 text-sm text-gray-500 dark:text-gray-400 flex items-center"},io=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),co=["id","onUpdate:modelValue","placeholder"],uo=["id","onUpdate:modelValue","placeholder"],go={class:"flex justify-center mt-8"},vo=["disabled"],ho={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},po=c(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)),mo=[po],fo={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yo=c(()=>e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),bo=c(()=>e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),wo=[yo,bo],xo={key:0,class:"mb-12"},ko=c(()=>e("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-4"},"生成结果",-1)),_o={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},Co=["onClick"],Io=["src","alt"],jo=T('<div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-sm shadow-sm opacity-70 hover:opacity-100 transition-opacity" data-v-34045554> 1天后过期 </div><div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100" data-v-34045554><div class="text-white flex items-center bg-black bg-opacity-60 px-3 py-1.5 rounded-full" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" data-v-34045554></path></svg><span class="text-sm" data-v-34045554>点击放大</span></div></div>',2),Mo={class:"p-2 flex justify-center bg-gray-50 dark:bg-gray-800"},$o=["onClick"],Bo=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),To={class:"flex justify-center mt-6"},zo=["disabled"],Vo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Uo=c(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),Lo=[Uo],Ao={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ho=c(()=>e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),Fo=c(()=>e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),Do=[Ho,Fo],Po={key:1,class:"mb-12 border border-gray-200 dark:border-gray-700 rounded-lg p-8"},No=c(()=>e("div",{class:"flex flex-col items-center justify-center text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-4"}),e("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2"},"AI正在为您生成精美封面..."),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"请稍候，这可能需要几秒钟时间")],-1)),So=[No],Oo={class:"flex-1 flex flex-col pb-8 min-h-[300px]"},Eo={class:"flex justify-between items-center mb-4"},qo=c(()=>e("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-200"},"历史记录",-1)),Ro={class:"flex items-center space-x-4"},Ko={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Go={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 11l7-7 7 7M5 19l7-7 7 7"},Jo={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 13l-7 7-7-7M19 5l-7 7-7-7"},Qo=["disabled"],Wo=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Xo=T('<div class="mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800" data-v-34045554><div class="flex items-center text-sm" data-v-34045554><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-34045554><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-34045554></path></svg><span class="text-gray-700 dark:text-gray-300" data-v-34045554> 系统会自动清理1天前的历史记录数据，请及时下载需要保存的图片。 </span></div></div>',1),Yo={class:"mb-4"},Zo={class:"relative"},er=c(()=>e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),tr=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 hover:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),or=[tr],rr={key:0,class:"text-center py-8"},sr=c(()=>e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"},null,-1)),lr=c(()=>e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"加载历史记录中...",-1)),ar=[sr,lr],nr={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ir={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},dr={key:3,class:"space-y-4"},cr=["onClick"],ur={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},gr={class:"text-sm text-gray-500 dark:text-gray-400"},vr={class:"flex items-center"},hr=c(()=>e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)),pr=[hr],mr={key:0,class:"text-center py-4 text-gray-500 dark:text-gray-400"},fr={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"},yr=["onClick"],br=["src","alt"],wr=c(()=>e("div",{class:"absolute top-2 right-2 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-sm shadow-sm opacity-70 hover:opacity-100 transition-opacity"}," 1天后过期 ",-1)),xr=c(()=>e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100"},[e("div",{class:"text-white flex items-center bg-black bg-opacity-60 px-3 py-1.5 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})]),e("span",{class:"text-sm"},"点击放大")])],-1)),kr={class:"p-2 flex justify-center bg-gray-50 dark:bg-gray-800"},_r=["onClick"],Cr=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),Ir={key:0,class:"flex justify-center mt-6"},jr=["disabled"],Mr={key:0,class:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$r=c(()=>e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),Br=c(()=>e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)),Tr=[$r,Br],zr=c(()=>e("div",{class:"h-16 bg-white dark:bg-gray-900"},null,-1)),ve=10,Vr=De({__name:"index",setup(b){const g=m({keyword:"",count:4,additionalFields:{}}),I=m(!1),H=m([]),w=m([]),W=m(""),q=m(""),R=m(!1),z=m(""),P=m(!1),N=m(1),v=m("theme"),le=m(!0),V=m([]),S=m(!1),F=m(null),D=m(1),ae={theme:[],poster:[],model:[{key:"subtitle",label:"副标题",placeholder:"请输入副标题"},{key:"paragraph1Title",label:"小标题1",placeholder:"请输入小标题1"},{key:"paragraph1Content",label:"正文1内容",placeholder:"请输入正文1内容"},{key:"paragraph2Title",label:"小标题2",placeholder:"请输入小标题2"},{key:"paragraph2Content",label:"正文2内容",placeholder:"请输入正文2内容"},{key:"paragraph3Title",label:"小标题3",placeholder:"请输入小标题3"},{key:"paragraph3Content",label:"正文3内容",placeholder:"请输入正文3内容"}],memo:[{key:"paragraph1Title",label:"段落标题",placeholder:"请输入段落标题"},{key:"paragraph1Content",label:"段落内容",placeholder:"请输入段落内容，可以详细描述"}],grid:[{key:"subtitle",label:"副标题",placeholder:"请输入副标题"},{key:"images",label:"图片上传",placeholder:"请上传图片（最多4张）",type:"multi-image"}]},he={theme:267,poster:280,model:231,memo:374,grid:147},O=m(!1),h=m({}),ne=J(()=>w.value.length===0?!1:w.value.every(r=>V.value.includes(r.id)));J(()=>w.value.length===0?!1:w.value.every(r=>!r.images||r.images.length===0));const U=m(""),X=J(()=>{if(!U.value.trim())return w.value;const r=U.value.toLowerCase().trim();return w.value.filter(o=>o.prompt.toLowerCase().includes(r))}),be=J(()=>X.value.length===0?!1:X.value.every(r=>!r.images||r.images.length===0)),Y=m(!1),Z=m(""),ie=m(0),de=m(""),ee=m(null),we=Ke(),xe=J(()=>we.isLogin);Pe(async()=>{xe.value&&(u("正在加载历史记录，同时清理1天前的数据...","info"),await ce(),w.value.length>0&&u("历史记录加载完成，1天前的数据已被清理","success"))});function K(r){v.value=r,g.value.additionalFields={},r!=="grid"&&(h.value={}),console.log(`已选择模式: ${r}`)}async function ce(){var r;R.value=!0,z.value="";try{console.log("开始加载历史任务，参数：",{page:N.value,limit:ve});const o=await Qe({page:N.value,limit:ve});if(console.log("历史任务API响应：",o),o.code===200){let s=o.data;s&&s.data&&(s=s.data),console.log("处理后的历史任务数据:",s);let t=null;if(s&&s.history&&Array.isArray(s.history)?t=s.history:s&&s.data&&s.data.history&&Array.isArray(s.data.history)&&(t=s.data.history),t&&t.length>0){console.log("获取到历史任务数量：",t.length);const i=t.map(d=>(d.images&&Array.isArray(d.images)?d.images=d.images.filter(p=>p&&p.url&&!p.url.includes("null")):d.images=[],(!d.mainImageUrl||d.mainImageUrl.includes("null"))&&(d.mainImageUrl=d.images&&d.images.length>0?d.images[0].url:""),d)),l=N.value===1?i:[...w.value,...i];w.value=l,console.log("处理后的历史任务数量：",w.value.length)}else console.log("暂无历史记录数据")}else console.warn("历史任务API返回错误:",o),z.value=o.message||"未知错误",u(z.value,"error")}catch(o){console.error("获取历史记录失败:",o),((r=o.response)==null?void 0:r.status)===401?z.value="请先登录后再查看历史记录":z.value=o.message||"未知错误",u(z.value,"error")}finally{R.value=!1}}async function ke(){if(!P.value){P.value=!0,N.value+=1;try{console.log("加载更多历史记录，页码：",N.value),await ce(),w.value.length%ve!==0&&(le.value=!1,console.log("没有更多历史记录了"))}catch(r){console.error("加载更多历史记录失败:",r)}finally{P.value=!1}}}async function ue(){console.log("开始刷新历史记录"),N.value=1,w.value=[],le.value=!0,u("正在刷新历史记录，同时清理1天前的数据...","info"),await ce(),console.log("历史记录刷新完成，任务数量:",w.value.length),u("历史记录已更新，1天前的数据已被清理","success")}async function _e(){if(!g.value.keyword){u("请输入关键词","error");return}const r=Object.keys(h.value).filter(l=>typeof l=="string"&&!l.includes("_url")),o=r.length;if(v.value==="grid"&&o<2){u("请至少上传2张图片","error");return}I.value=!0,H.value=[],F.value=null,D.value=1;const s=v.value;let t=he[s];s==="grid"&&(o===2?t=148:o===3?t=147:o===4&&(t=130));const i={title:g.value.keyword,type:"theme",count:g.value.count,intellectId:t,additionalFields:g.value.additionalFields,pageNo:1};console.log("======== 前端生成图片请求参数 ========"),console.log(`模式: ${s}, 模式ID: ${t}, 图片数量: ${o}`),console.log(`标题: ${g.value.keyword}`),console.log("完整请求参数:"),console.log(JSON.stringify(i,null,2)),s==="grid"&&(console.log("上传的图片信息:"),r.forEach(l=>{console.log(`${l}: ${h.value[l]} (${h.value[`${l}_url`]||"无URL"})`)})),console.log("=======================================");try{console.log("开始发送生成图片请求...");const l=await me(i);if(console.log("======== 生成图片响应 ========"),console.log(JSON.stringify(l,null,2)),console.log("==============================="),l.code===200){const d=l.data&&l.data.data?l.data.data:l.data;if(console.log("处理后的响应数据:",d),d.taskId&&(F.value=typeof d.taskId=="number"?d.taskId:parseInt(d.taskId),console.log("保存当前任务ID:",F.value)),d.currentPage?D.value=d.currentPage:D.value=1,d&&d.images&&Array.isArray(d.images)){const p=d.images.filter(y=>y&&y.url&&!y.url.includes("null"));if(p.length>0){H.value=p,u("图片生成成功","success"),console.log("生成成功，准备刷新历史记录"),await ue(),console.log("历史记录刷新完成"),h.value={};for(let y=1;y<=4;y++)delete g.value.additionalFields[`image${y}`]}else console.error("没有找到有效的图片:",d),u("未能获取有效图片","error")}else console.error("响应数据格式不正确:",d),u("获取图片数据失败","error")}else u(l.message||"图片生成失败","error"),console.error("生成图片失败:",l)}catch(l){console.error("======== 生成图片请求失败 ========"),console.error(`错误消息: ${l.message||"未知错误"}`),l.response&&(console.error(`响应状态码: ${l.response.status}`),console.error("响应数据:",l.response.data)),console.error("==================================="),u(l.message||"生成图片失败，请稍后重试","error")}finally{I.value=!1}}function Ce(){g.value={keyword:"",count:4,additionalFields:{}},H.value=[]}async function te(r,o,s=""){if(!r||!r.url){console.error("无效的图片数据"),u("无法下载图片，无效的图片数据","error");return}if(!r.taskId){console.error("缺少任务ID，无法获取高质量下载链接"),u("无法下载图片，缺少任务ID","error");return}u("正在获取下载链接...","info");try{console.log("通过任务ID下载图片:",r.taskId);const t=await We(r.taskId);console.log("下载图片API响应:",t);const i=s?`${s}_${o+1}.jpg`:`图片_${g.value.keyword||"image"}_${o+1}.jpg`;if(t.code===200&&t.data){let l=null;const d=t.data;if(d.data&&d.data.downloadUrl?(l=d.data.downloadUrl,console.log("从嵌套结构中获取到下载链接")):d.downloadUrl?(l=d.downloadUrl,console.log("从单层结构中获取到下载链接")):typeof d=="string"&&(l=d,console.log("获取到直接返回的URL字符串")),l){console.log("获取到下载链接，开始下载:",l);try{const p=document.createElement("iframe");p.style.display="none",document.body.appendChild(p);const y=document.createElement("a");y.href=l,y.download=i,y.target="_blank",y.style.display="none",document.body.appendChild(y),y.click(),setTimeout(()=>{document.body.removeChild(y),document.body.removeChild(p)},100),u("图片下载已开始","success");return}catch(p){console.error("下载图片失败:",p),window.open(l,"_blank"),u("已打开下载链接","success");return}}if(console.log("未找到下载链接，尝试使用原图URL"),r.url){const p=document.createElement("a");p.href=r.url,p.download=i,p.style.display="none",document.body.appendChild(p),p.click(),setTimeout(()=>{document.body.removeChild(p)},100),u("使用原图URL下载","success");return}u("无法获取图片下载链接，请稍后重试","error")}else u(t.message||"获取图片数据失败，请稍后重试","error")}catch(t){console.error("下载图片失败:",t),u(t.message||"下载图片失败，请稍后重试","error")}}function u(r,o="info"){W.value=r,q.value=o,setTimeout(()=>{W.value="",q.value=""},3e3)}function Ie(r){if(!r)return"未知时间";try{return(typeof r=="string"?new Date(r):r).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return typeof r=="string"?r:"未知时间"}}function je(){console.log("搜索历史记录:",U.value)}function Me(){U.value=""}function $e(){console.error("图片加载失败:",Z.value),u("图片加载失败","error"),G()}function pe(r,o,s=""){if(console.log("图片被点击:",{image:r,index:o,prompt:s}),event&&(event.stopPropagation(),event.preventDefault()),!r||!r.url&&!r.superUrl||r.url&&r.url.includes("null")&&!r.superUrl){console.error("无效的图片URL:",r==null?void 0:r.url,r==null?void 0:r.superUrl),u("无法打开图片预览，图片链接无效","error");return}Z.value=r.url,ie.value=o,de.value=s||"",ee.value=r,Ee(()=>{Y.value=!0,console.log("图片查看器已打开, 状态:",{showImageViewer:Y.value,currentViewingImage:Z.value,currentImageSuperUrl:r.superUrl})})}function Be(){ne.value?V.value=[]:V.value=w.value.map(r=>r.id)}function Te(r){const o=V.value.indexOf(r);o===-1?V.value.push(r):V.value.splice(o,1)}function G(){console.log("关闭图片查看器"),event&&(event.stopPropagation(),event.preventDefault()),Y.value=!1}function ze(r){if(h.value[r]){delete h.value[r],delete h.value[`${r}_url`],delete g.value.additionalFields[r];const o=Object.keys(h.value).filter(t=>typeof t=="string"&&!t.includes("_url")).sort();if(o.length>0){const t={},i={};o.forEach((l,d)=>{const p=`image${d+1}`;t[p]=h.value[l],t[`${p}_url`]=h.value[`${l}_url`],i[p]=g.value.additionalFields[l]}),h.value=t,g.value.additionalFields=i}const s=Object.keys(h.value).filter(t=>typeof t=="string"&&!t.includes("_url")).length;s===0?v.value="theme":(s===2||s>=3)&&(v.value="grid")}}async function Ve(r){const o=r.target;if(!o.files||o.files.length===0)return;const s=Array.from(o.files);O.value=!0;try{const i=Object.keys(h.value).filter(j=>typeof j=="string"&&!j.includes("_url")).length,l=4-i,d=s.slice(0,l);if(s.length>l&&u(`最多只能上传4张图片，已选择前${l}张`,"info"),d.length===0){O.value=!1;return}u(`正在上传${d.length}张图片...`,"info");const p=d.map(async(j,L)=>{try{const M=new FormData;M.append("file",j),M.append("fileName",j.name),M.append("contentType",j.type),M.append("sourceType","1"),M.append("autoConfirm","1"),M.append("hide","true");const x=await Je(M);if(console.log(`图片${L+1}上传结果:`,x),x.code===200&&x.data){const Fe=`image${i+L+1}`;let E="",oe="";if(x.data&&typeof x.data=="object")if("data"in x.data&&x.data.data&&typeof x.data.data=="object"){const B=x.data.data;"imageId"in B&&(E=B.imageId),"url"in B&&(oe=B.url)}else{const B=x.data;"imageId"in B&&(E=B.imageId),"url"in B&&(oe=B.url)}else x.data&&typeof x.data=="string"&&(E=x.data,oe=`https://pri-cdn-oss.chuangkit.com/svg_build/render_result/${E}?x-oss-process=image/resize,w_300`);return E?{imageKey:Fe,imageId:E,imageUrl:oe}:(console.error(`图片${L+1}上传失败，无法获取图片ID，响应结构:`,x),null)}else return console.error(`图片${L+1}上传失败:`,x.message||"未知错误"),null}catch(M){return console.error(`图片${L+1}上传失败:`,M),null}}),ge=(await Promise.all(p)).filter(j=>j!==null);ge.length>0?(ge.forEach(({imageKey:j,imageId:L,imageUrl:M})=>{h.value[j]=L,g.value.additionalFields[j]=L,h.value[`${j}_url`]=M}),Ue(),u(`成功上传${ge.length}张图片`,"success")):u("所有图片上传失败","error")}catch(t){console.error("批量上传图片失败:",t),u("批量上传图片失败: "+(t.message||"未知错误"),"error")}finally{O.value=!1,o.value=""}}function Ue(){const o=Object.keys(h.value).filter(s=>typeof s=="string"&&!s.includes("_url")).length;o>=2&&(v.value="grid"),console.log(`已上传${o}张图片，当前模式: ${v.value}`)}function Le(){const o=Object.keys(h.value).filter(s=>typeof s=="string"&&!s.includes("_url")).length;return o===0?"请上传图片，最多可上传4张":o===1?"已上传1张图片，至少需要2张图片才能生成拼图":o===2?"已上传2张图片，将生成二宫格拼图":o===3?"已上传3张图片，将生成三宫格拼图":"已上传4张图片，达到最大上传数量"}function Ae(){const o=Object.keys(h.value).filter(s=>typeof s=="string"&&!s.includes("_url")).length;return o===0?"请上传2-4张图片制作拼图":o===1?"已上传1张图片，至少需要2张图片":o===2?"二宫格拼图模式，已上传2张图片":o===3?"三宫格拼图模式，已上传3张图片":"四宫格拼图模式，已上传4张图片"}async function He(){if(!(S.value||!F.value)){S.value=!0;try{const r={title:g.value.keyword,type:"theme",pageNo:D.value+1,previousTaskId:F.value,intellectId:he[v.value],additionalFields:g.value.additionalFields};console.log("继续生成请求参数:",r);const o=await me(r);if(console.log("继续生成响应:",o),o.code===200){let s=o.data;if(s&&typeof s=="object"&&"data"in s&&(s=s.data,console.log("已处理嵌套数据结构:",s)),s){const t=s.images||[];if(console.log(`获取到${t.length}张新图片`),t.length>0){const i=t.map(l=>({...l,taskId:l.taskId||"",url:l.url||""}));console.log("处理后的新图片:",i),H.value=[...H.value,...i],s.taskId&&(F.value=typeof s.taskId=="number"?s.taskId:parseInt(s.taskId),console.log("更新任务ID:",F.value)),s.currentPage?D.value=s.currentPage:D.value++,console.log("更新当前页码:",D.value),u("生成更多图片成功","success"),setTimeout(async()=>{await ue()},1e3),setTimeout(()=>{const l=document.querySelector(".grid > div:last-child");l&&l.scrollIntoView({behavior:"smooth",block:"center"})},100)}else console.error("响应中没有找到新图片:",s),u("未能获取更多图片","error")}else console.error("响应数据格式不正确:",o),u("返回数据格式不正确","error")}else u(o.message||"继续生成图片失败","error")}catch(r){console.error("继续生成失败:",r),u(r.message||"继续生成图片失败，请稍后重试","error")}finally{S.value=!1}}}return(r,o)=>{var s;return a(),n("div",Xe,[W.value?(a(),n("div",{key:0,class:A(["fixed top-4 left-1/2 transform -translate-x-1/2 z-50 p-4 rounded-lg shadow-lg",{"bg-green-100 text-green-800":q.value==="success","bg-red-100 text-red-800":q.value==="error","bg-blue-100 text-blue-800":q.value==="info"}])},k(W.value),3)):f("",!0),Y.value?(a(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-75 z-[9999] flex items-center justify-center",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","touch-action":"none","backdrop-filter":"blur(2px)"},onClick:G,onTouchend:G},[e("div",{class:"relative max-w-4xl max-h-screen flex flex-col items-center",onClick:o[2]||(o[2]=_(()=>{},["stop"])),onTouchend:o[3]||(o[3]=_(()=>{},["stop"]))},[e("div",Ye,[e("button",{onClick:_(G,["stop"]),onTouchend:_(G,["stop"]),class:"bg-white rounded-full p-2 hover:bg-gray-100 transition-colors shadow-md"},et,32)]),e("div",tt,[e("img",{src:((s=ee.value)==null?void 0:s.superUrl)||Z.value,alt:"预览图片",class:"max-h-[80vh] max-w-full object-contain bg-gray-100 dark:bg-gray-800 rounded",onError:$e},null,40,ot),rt]),e("div",st,[e("button",{onClick:o[0]||(o[0]=_(t=>te(ee.value,ie.value,de.value),["stop"])),onTouchend:o[1]||(o[1]=_(t=>te(ee.value,ie.value,de.value),["stop"])),class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-md shadow-lg flex items-center transition-colors duration-200 font-medium"},[lt,C(" 下载高清图片 ")],32)])],32)],32)):f("",!0),e("div",at,[e("div",nt,[it,e("div",dt,[e("div",ct,[e("div",{class:A(["relative p-6 border rounded-lg cursor-pointer transition-all duration-200 flex flex-col items-center",v.value==="theme"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"]),onClick:o[4]||(o[4]=t=>K("theme"))},[ut,v.value==="theme"?(a(),n("div",gt,ht)):f("",!0)],2),e("div",{class:A(["relative p-6 border rounded-lg cursor-pointer transition-all duration-200 flex flex-col items-center",v.value==="poster"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"]),onClick:o[5]||(o[5]=t=>K("poster"))},[pt,v.value==="poster"?(a(),n("div",mt,yt)):f("",!0)],2),e("div",{class:A(["relative p-6 border rounded-lg cursor-pointer transition-all duration-200 flex flex-col items-center",v.value==="model"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"]),onClick:o[6]||(o[6]=t=>K("model"))},[bt,v.value==="model"?(a(),n("div",wt,kt)):f("",!0)],2),e("div",{class:A(["relative p-6 border rounded-lg cursor-pointer transition-all duration-200 flex flex-col items-center",v.value==="memo"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"]),onClick:o[7]||(o[7]=t=>K("memo"))},[_t,v.value==="memo"?(a(),n("div",Ct,jt)):f("",!0)],2),e("div",{class:A(["relative p-6 border rounded-lg cursor-pointer transition-all duration-200 flex flex-col items-center",v.value==="grid"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300"]),onClick:o[8]||(o[8]=t=>K("grid"))},[Mt,v.value==="grid"?(a(),n("div",$t,Tt)):f("",!0)],2)]),e("div",zt,[e("div",Vt,[Ut,e("span",Lt,[At,v.value==="theme"?(a(),n($,{key:0},[C("主题图文模式 - 适合正式场景，生成带有主题的图文封面")],64)):v.value==="poster"?(a(),n($,{key:1},[C("表情封面模式 - 适合活泼场景，生成带有表情元素的封面")],64)):v.value==="model"?(a(),n($,{key:2},[C("文案配图模式 - 智能匹配文案和图片，效果更加精美")],64)):v.value==="memo"?(a(),n($,{key:3},[C("备忘录内页模式 - 生成专业的备忘录内页样式，适合记录和分享笔记")],64)):v.value==="grid"?(a(),n($,{key:4},[C("图片拼图模式 - "+k(Ae()),1)],64)):f("",!0)])])])]),e("form",{onSubmit:_(_e,["prevent"]),class:"mb-8"},[e("div",Ht,[Ft,e("div",Dt,[re(e("input",{type:"text",id:"keyword","onUpdate:modelValue":o[9]||(o[9]=t=>g.value.keyword=t),class:"w-full px-5 py-3 border-2 border-blue-200 dark:border-blue-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm transition-all duration-200",placeholder:"请输入图片主题，例如：'山茶油'、'春天的森林'",required:""},null,512),[[se,g.value.keyword]])]),Pt]),ae[v.value]&&ae[v.value].length>0?(a(),n("div",Nt,[(a(!0),n($,null,Q(ae[v.value],t=>(a(),n("div",{key:t.key,class:"mb-4"},[e("label",{for:t.key,class:"block text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},k(t.label),9,St),e("div",Ot,[t.type==="multi-image"?(a(),n("div",Et,[Object.keys(h.value).filter(i=>typeof i=="string"&&!i.includes("_url")).length>0?(a(),n("div",qt,[(a(!0),n($,null,Q(Object.keys(h.value).filter(i=>typeof i=="string"&&!i.includes("_url")).sort(),i=>(a(),n("div",{key:i,class:"relative group"},[e("div",Rt,[e("img",{src:h.value[`${i}_url`]||`https://pri-cdn-oss.chuangkit.com/svg_build/render_result/${h.value[i]}?x-oss-process=image/resize,w_300`,alt:`图片 ${String(i).replace("image","")}`,class:"w-full h-full object-cover"},null,8,Kt),Gt,e("div",Jt,k(String(i).replace("image","")),1)]),e("button",{onClick:_(l=>ze(String(i)),["stop","prevent"]),class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 transition-colors duration-200 z-10 opacity-0 group-hover:opacity-100",type:"button","aria-label":"移除图片"},Xt,8,Qt)]))),128))])):f("",!0),Object.keys(h.value).filter(i=>typeof i=="string"&&!i.includes("_url")).length<4?(a(),n("div",Yt,[e("label",{for:"file-upload-multi",class:A(["cursor-pointer bg-white dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 flex flex-col items-center justify-center w-full h-36 relative transition-all duration-200 hover:border-blue-400 dark:hover:border-blue-500",{"opacity-80 bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700":O.value}])},[O.value?(a(),n("div",Zt,to)):(a(),n("div",oo,[ro,so,e("span",lo," 支持多选，已上传 "+k(Object.keys(h.value).filter(i=>typeof i=="string"&&!i.includes("_url")).length)+"/4 张图片 ",1)]))],2),e("input",{id:"file-upload-multi",type:"file",class:"hidden",accept:"image/*",onChange:Ve,disabled:O.value,multiple:""},null,40,ao)])):f("",!0),e("div",no,[io,e("span",null,k(Le()),1)])])):t.key.includes("Content")?re((a(),n("textarea",{key:1,id:t.key,"onUpdate:modelValue":i=>g.value.additionalFields[t.key]=i,class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-y",placeholder:t.placeholder,rows:"4"},null,8,co)),[[se,g.value.additionalFields[t.key]]]):re((a(),n("input",{key:2,type:"text",id:t.key,"onUpdate:modelValue":i=>g.value.additionalFields[t.key]=i,class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:t.placeholder},null,8,uo)),[[se,g.value.additionalFields[t.key]]])])]))),128))])):f("",!0),e("div",go,[e("button",{type:"submit",class:"px-8 py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-300 focus:outline-none flex items-center justify-center shadow-md hover:shadow-lg font-medium",disabled:I.value},[I.value?(a(),n("svg",fo,wo)):(a(),n("svg",ho,mo)),C(" "+k(I.value?"生成中...":"生成封面"),1)],8,vo),e("button",{type:"button",onClick:Ce,class:"ml-4 px-6 py-4 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 focus:outline-none"}," 重置 ")])],32),H.value.length>0?(a(),n("div",xo,[ko,e("div",_o,[(a(!0),n($,null,Q(H.value,(t,i)=>(a(),n("div",{key:i,class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden group relative flex flex-col"},[e("div",{class:"aspect-square cursor-pointer relative overflow-hidden",onClick:_(l=>pe(t,i,g.value.keyword),["stop"]),title:"点击放大查看"},[e("img",{src:t.superUrl||t.url,alt:`生成图片 ${i+1}`,class:"w-full h-full object-contain bg-gray-50 dark:bg-gray-800"},null,8,Io),jo],8,Co),e("div",Mo,[e("button",{onClick:_(l=>te(t,i,g.value.keyword),["stop"]),class:"flex items-center justify-center w-full px-3 py-2 text-gray-100 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 rounded-md shadow transition-colors duration-200 font-medium",title:"下载图片"},[Bo,C(" 下载图片 ")],8,$o)])]))),128))]),e("div",To,[e("button",{type:"button",onClick:He,class:"px-8 py-4 border-2 border-blue-500 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-all duration-300 focus:outline-none flex items-center justify-center shadow-sm hover:shadow-md font-medium",disabled:S.value},[S.value?(a(),n("svg",Ao,Do)):(a(),n("svg",Vo,Lo)),C(" "+k(S.value?"生成中...":"继续生成更多"),1)],8,zo)])])):I.value?(a(),n("div",Po,So)):f("",!0),e("div",Oo,[e("div",Eo,[qo,e("div",Ro,[w.value.length>0?(a(),n("button",{key:0,onClick:Be,class:"text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 flex items-center text-sm"},[(a(),n("svg",Ko,[ne.value?(a(),n("path",Go)):(a(),n("path",Jo))])),C(" "+k(ne.value?"全部折叠":"全部展开"),1)])):f("",!0),e("button",{onClick:ue,class:"text-blue-500 flex items-center",disabled:R.value},[Wo,C(" "+k(R.value?"加载中...":"刷新历史"),1)],8,Qo)])]),Xo,e("div",Yo,[e("div",Zo,[re(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>U.value=t),class:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"搜索历史主题...",onInput:je},null,544),[[se,U.value]]),er,U.value?(a(),n("button",{key:0,onClick:Me,class:"absolute inset-y-0 right-0 flex items-center pr-3"},or)):f("",!0)])]),R.value?(a(),n("div",rr,ar)):X.value.length===0?(a(),n("div",nr,k(U.value?"没有找到匹配的历史记录":z.value?z.value:"暂无历史记录"),1)):be.value?(a(),n("div",ir," 已找到历史记录，但没有有效的图片可以显示 ")):(a(),n("div",dr,[(a(!0),n($,null,Q(X.value,t=>(a(),n("div",{key:t.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},[e("div",{onClick:i=>Te(t.id),class:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200"},[e("div",null,[e("h3",ur,k(t.prompt),1),e("p",gr,k(Ie(t.createTime))+" · "+k(t.images.length||0)+"张图片 ",1)]),e("div",vr,[(a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",class:A(["h-5 w-5 text-gray-500 transition-transform duration-300",V.value.includes(t.id)?"transform rotate-180":""]),viewBox:"0 0 20 20",fill:"currentColor"},pr,2))])],8,cr),Ne(Oe,{name:"expand"},{default:Se(()=>[V.value.includes(t.id)?(a(),n("div",{key:0,class:"border-t border-gray-200 dark:border-gray-700 p-4",onClick:o[11]||(o[11]=_(()=>{},["stop"]))},[!t.images||t.images.length===0?(a(),n("div",mr," 该任务没有可显示的图片 ")):(a(),n("div",fr,[(a(!0),n($,null,Q(t.images,(i,l)=>(a(),n("div",{key:l,class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden group relative flex flex-col"},[e("div",{class:"aspect-square cursor-pointer relative overflow-hidden",onClick:_(d=>pe(i,l,t.prompt),["stop"]),title:"点击放大查看"},[e("img",{src:i.superUrl||i.url,alt:`${t.prompt} ${l+1}`,class:"w-full h-full object-contain bg-gray-50 dark:bg-gray-800"},null,8,br),wr,xr],8,yr),e("div",kr,[e("button",{onClick:_(d=>te(i,l,t.prompt),["stop"]),class:"flex items-center justify-center w-full px-3 py-2 text-gray-100 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 rounded-md shadow transition-colors duration-200 font-medium",title:"下载图片"},[Cr,C(" 下载图片 ")],8,_r)])]))),128))]))])):f("",!0)]),_:2},1024)]))),128)),le.value?(a(),n("div",Ir,[e("button",{onClick:ke,class:"px-6 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md transition-all duration-200 focus:outline-none flex items-center",disabled:P.value},[P.value?(a(),n("svg",Mr,Tr)):f("",!0),C(" "+k(P.value?"加载中...":"加载更多"),1)],8,jr)])):f("",!0)]))])])]),zr])}}});const Pr=Ge(Vr,[["__scopeId","data-v-34045554"]]);export{Pr as default};
