
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-BkBSJsBX.js";import{d as F,m as $,r as M,a as H,p as u,g as v,c as K,b as e,w as l,h as b,i as _,K as g,v as B,A as N,F as J,s as L,e as i,G as I,j as z,_ as Q,k as A}from"./index-CnisIzlN.js";import{a as q}from"./config-l0iHqPQb.js";const W=i("div",{class:"flex items-center gap-4"},"全局参数设置",-1),X=i("div",{class:"text-sm/6"},[i("div",null,[b(" 系统默认的请求地址是 "),i("a",{href:"https://api.openai.com",target:"_blank"},"https://api.openai.com"),b("，国内服务器可能无法访问，需使用自己的代理或中转。 ")]),i("div",null," 此处配置为全局配置，一些系统内置的自动服务会使用到该模型。另外，当模型不配置 Key 以及 Url 时，会使用全局配置。 "),i("div",null,[b(" API 中转推荐 "),i("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"https://api.lightai.io"),b("，支持OpenAI，Midjourney 以及多种国内外模型，无强制绑定关系，可按需选择。 ")])],-1),Y=i("div",{style:{width:"250px"}},[i("p",null,"开启后、对话模型将会继承上一次对话的模型、默认开启")],-1),Z=i("div",{style:{width:"250px"}},[i("p",null," 开启后，识图时将使用 base64 格式，对于本地/存储桶 链接 API 端无法访问时建议开启 ")],-1),ee=i("div",{style:{width:"250px"}},[i("p",null,"开启后，将使用全局模型在每次对话后，生成提问建议")],-1),le=i("div",{style:{width:"250px"}}," 开启连续绘画会在使用 Dalle 绘图的时候,调用全局模型,根据上文总结绘画要求 ",-1),ae=i("div",{style:{width:"250px"}}," 开启优化后, MJ 提示词默认会使用全局模型进行翻译/联想, 不再单独扣费, 一般中转会自带翻译, 请根据实际情况选择。 ",-1),te=i("div",{style:{width:"250px"}}," 默认会存储图片到配置的存储中、如果开启此选择则表示不保存原图到我们配置的存储上、直接反代访问原始图片、这样可以进一步节省空间、但访问速度及稳定性可能有所降低！ ",-1),oe=i("div",{style:{width:"250px"}}," 开启不使用代理将直接使用重中转获取到的链接、原生discord地址国内无法访问! ",-1),ne={class:"flex"},re=F({__name:"interface",setup(se){const t=$({openaiBaseUrl:"",openaiBaseKey:"",openaiTimeout:"",openaiBaseModel:"gpt-4o-mini",openaiTemperature:1,isGeneratePromptReference:0,mjNotSaveImg:0,mjProxyImgUrl:"",systemPreMessage:"",mjNotUseProxy:1,isMjTranslate:0,mjTranslatePrompt:"",isDalleChat:1,isModelInherited:1,openaiVoice:"",isConvertToBase64:0,externalApiKey:""}),S=M([{label:"Alloy",value:"alloy"},{label:"Echo",value:"echo"},{label:"Fable",value:"fable"},{label:"Onyx",value:"onyx"},{label:"Nova",value:"nova"},{label:"Shimmer",value:"shimmer"}]),R=M({openaiBaseUrl:[{required:!1,trigger:"blur",message:"请填写openai的请求地址"}],isMjTranslate:[{required:!1,trigger:"blur",message:"是否开启翻译/联想"}],isGeneratePromptReference:[{required:!1,trigger:"blur",message:"是否生成提示词参考"}],isDalleChat:[{required:!1,trigger:"blur",message:"是否开启连续绘画"}],isModelInherited:[{required:!1,trigger:"blur",message:"是否继承模型"}],openaiTimeout:[{required:!1,trigger:"blur",message:"请填写openai的超时时间（单位ms）"}],openaiBaseModel:[{required:!1,trigger:"blur",message:"请填写全局模型，用于后台一些静默性赋能操作"}],openaiTemperature:[{required:!1,trigger:"blur",message:"请填写温度"}],mjTranslatePrompt:[{required:!1,trigger:"blur",message:"用于翻译 / 联想的提示词"}],openaiVoice:[{required:!1,trigger:"blur",message:"请填写openai的语音音色"}],isConvertToBase64:[{required:!1,trigger:"blur",message:"是否转换为base64"}],externalApiKey:[{required:!1,trigger:"blur",message:"外部API调用认证密钥"}]}),C=M();async function k(){const d=await q.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","openaiTemperature","mjNotSaveImg","mjProxyImgUrl","systemPreMessage","mjNotUseProxy","isMjTranslate","isGeneratePromptReference","mjTranslatePrompt","isDalleChat","isModelInherited","openaiVoice","isConvertToBase64","externalApiKey"]}),{openaiBaseUrl:a="",openaiBaseKey:x="",openaiTimeout:y=300,openaiBaseModel:V="gpt-4o-mini",openaiTemperature:m=1,isMjTranslate:n="",isGeneratePromptReference:r=0,mjNotSaveImg:s,mjProxyImgUrl:p,systemPreMessage:f,mjNotUseProxy:c,mjTranslatePrompt:h,isDalleChat:T,isModelInherited:j,openaiVoice:P,isConvertToBase64:U,externalApiKey:w}=d.data;Object.assign(t,{openaiBaseUrl:a,openaiBaseKey:x,openaiTimeout:y,isMjTranslate:n,isGeneratePromptReference:r,openaiTemperature:m,openaiBaseModel:V,mjNotSaveImg:s,mjProxyImgUrl:p,systemPreMessage:f,mjNotUseProxy:c,mjTranslatePrompt:h,isDalleChat:T,isModelInherited:j,openaiVoice:P,isConvertToBase64:U,externalApiKey:w})}function D(){var d;(d=C.value)==null||d.validate(async a=>{if(a){try{await q.setConfig({settings:G(t)}),I.success("变更配置信息成功")}catch{}k()}else I.error("请填写完整信息")})}function G(d){return Object.keys(d).map(a=>({configKey:a,configVal:d[a]}))}function O(){const d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const x=Math.random()*16|0;return(a==="x"?x:x&3|8).toString(16)});t.externalApiKey=d.replace(/-/g,"").substring(0,16),I.success("已生成随机API密钥")}return H(()=>{k()}),(d,a)=>{const x=z,y=Q,V=E,m=u("el-input"),n=u("el-form-item"),r=u("el-col"),s=u("el-row"),p=u("el-switch"),f=u("el-icon"),c=u("el-tooltip"),h=u("el-input-number"),T=u("el-option"),j=u("el-select"),P=u("el-button"),U=u("el-form"),w=u("el-card");return v(),K("div",null,[e(V,null,{title:l(()=>[W]),content:l(()=>[X]),default:l(()=>[e(y,{text:"",outline:"",onClick:D},{default:l(()=>[e(x,{name:"i-ri:file-text-line"}),b(" 保存设置 ")]),_:1})]),_:1}),e(w,{style:{margin:"20px"}},{default:l(()=>[e(U,{ref_key:"formRef",ref:C,rules:R.value,model:t,"label-width":"220px"},{default:l(()=>[e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"请求地址",prop:"openaiBaseUrl","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.openaiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=o=>t.openaiBaseUrl=o),placeholder:"默认地址: https://api.openai.com 第三方代理推荐：https://api.lightai.io",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局key",prop:"openaiBaseKey","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.openaiBaseKey,"onUpdate:modelValue":a[1]||(a[1]=o=>t.openaiBaseKey=o),placeholder:"请填写模型全局 Key 信息，当模型 Key 为空时调用",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局模型",prop:"openaiBaseModel","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.openaiBaseModel,"onUpdate:modelValue":a[2]||(a[2]=o=>t.openaiBaseModel=o),placeholder:"全局模型配置，用于后台一些静默赋能操作",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"继承对话模型",prop:"isModelInherited","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.isModelInherited,"onUpdate:modelValue":a[3]||(a[3]=o=>t.isModelInherited=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[Y]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"base64 识图",prop:"isConvertToBase64","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.isConvertToBase64,"onUpdate:modelValue":a[4]||(a[4]=o=>t.isConvertToBase64=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[Z]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"生成提问建议",prop:"isGeneratePromptReference","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.isGeneratePromptReference,"onUpdate:modelValue":a[5]||(a[5]=o=>t.isGeneratePromptReference=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ee]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"连续绘画",prop:"isDalleChat","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.isDalleChat,"onUpdate:modelValue":a[6]||(a[6]=o=>t.isDalleChat=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[le]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"提示词优化",prop:"isMjTranslate","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.isMjTranslate,"onUpdate:modelValue":a[7]||(a[7]=o=>t.isMjTranslate=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ae]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[1].includes(Number(t.isMjTranslate))?(v(),B(s,{key:0},{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"优化提示词",prop:"mjTranslatePrompt","label-width":"120px"},{default:l(()=>[e(m,{type:"textarea",rows:5,modelValue:t.mjTranslatePrompt,"onUpdate:modelValue":a[8]||(a[8]=o=>t.mjTranslatePrompt=o),placeholder:"Midjourney 翻译/联想提示词",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):N("",!0),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"不存储图片",prop:"mjNotSaveImg","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.mjNotSaveImg,"onUpdate:modelValue":a[9]||(a[9]=o=>t.mjNotSaveImg=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[te]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"不使用代理",prop:"mjNotUseProxy","label-width":"120"},{default:l(()=>[e(p,{modelValue:t.mjNotUseProxy,"onUpdate:modelValue":a[10]||(a[10]=o=>t.mjNotUseProxy=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[oe]),default:l(()=>[e(f,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(_(g))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[0].includes(Number(t.mjNotUseProxy))?(v(),B(s,{key:1},{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"反代地址",prop:"mjProxyImgUrl","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.mjProxyImgUrl,"onUpdate:modelValue":a[11]||(a[11]=o=>t.mjProxyImgUrl=o),placeholder:"Midjourney 反代地址，为空将直接使用原链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):N("",!0),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"Temperature",prop:"openaiTemperature","label-width":"120px"},{default:l(()=>[e(h,{modelValue:t.openaiTemperature,"onUpdate:modelValue":a[12]||(a[12]=o=>t.openaiTemperature=o),"controls-position":"right",min:0,max:2,step:.1,placeholder:"模型 Temperature 设置，默认1",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"TTS 音色",prop:"openaiVoice","label-width":"120px"},{default:l(()=>[e(j,{modelValue:t.openaiVoice,"onUpdate:modelValue":a[13]||(a[13]=o=>t.openaiVoice=o),placeholder:"选择或输入 openai 语音合成的默认发音人",clearable:"",filterable:"","allow-create":""},{default:l(()=>[(v(!0),K(J,null,L(S.value,o=>(v(),B(T,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"超时时间",prop:"openaiTimeout","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.openaiTimeout,"onUpdate:modelValue":a[14]||(a[14]=o=>t.openaiTimeout=o),placeholder:"openai超时时间设置、默认300s 单位：秒（s）",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局头部预设",prop:"systemPreMessage","label-width":"120px"},{default:l(()=>[e(m,{modelValue:t.systemPreMessage,"onUpdate:modelValue":a[15]||(a[15]=o=>t.systemPreMessage=o),type:"textarea",rows:8,placeholder:"请填写模型全局头部预设信息！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(r,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"外部API认证密钥",prop:"externalApiKey","label-width":"120px"},{default:l(()=>[i("div",ne,[e(m,{modelValue:t.externalApiKey,"onUpdate:modelValue":a[16]||(a[16]=o=>t.externalApiKey=o),placeholder:"请填写外部API认证密钥",clearable:""},null,8,["modelValue"]),e(P,{onClick:O,type:"primary",class:"ml-2"},{default:l(()=>[e(x,{name:"i-ri:refresh-line"}),b(" 随机生成 ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof A=="function"&&A(re);export{re as default};
