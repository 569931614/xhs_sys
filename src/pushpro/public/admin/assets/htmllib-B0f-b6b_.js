
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{bR as rt,a6 as Ue,n as se,au as It,av as _e,U as u,d as G,bh as zt,aw as st,az as ae,ax as J,aJ as We,ay as Dt,aA as Ve,r as _,a as ye,M as Ce,aj as ke,aB as Ae,aC as it,a5 as ut,aF as Ot,bn as Ze,aL as Lt,aK as Mt,a3 as ct,ab as me,ak as $t,am as Pt,z as Fe,al as Rt,aI as Te,F as ie,aD as X,P as Tt,aa as je,bS as dt,aU as Ye,ad as jt,g as M,c as P,e as v,J as ue,m as Xe,b as g,w as p,i as f,R as H,h as j,s as pe,t as E,v as Nt,A as Ne,S as Ht,y as Bt,T as Je,W as Et,X as Ut,l as Vt}from"./index-CnisIzlN.js";import{P as Wt}from"./PlusOutlined-Dxy3EoIJ.js";import{t as Zt,z as Ft,i as Yt,y as Xt,u as Jt,d as Ge,a as qe,N as Gt,b as we}from"./use-message-DYMqPvJU.js";import{d as qt,N as fe}from"./Icon-BI3nzoj7.js";import{N as Kt,a as Ke}from"./Table-BnpzIjRn.js";import{N as Qe}from"./Popconfirm-DZJlR63j.js";import{N as Qt}from"./Spin-Dl1eRu5a.js";import{N as ea,a as ee}from"./FormItem-DswOIw46.js";import{N as ta}from"./InputNumber-nCSOSPO9.js";function aa(e,o,s,m){for(var i=-1,x=e==null?0:e.length;++i<x;)s=o(s,e[i],i,e);return s}function na(e){return function(o){return e==null?void 0:e[o]}}var oa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},la=na(oa),ra=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sa="\\u0300-\\u036f",ia="\\ufe20-\\ufe2f",ua="\\u20d0-\\u20ff",ca=sa+ia+ua,da="["+ca+"]",ha=RegExp(da,"g");function fa(e){return e=rt(e),e&&e.replace(ra,la).replace(ha,"")}var ga=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function va(e){return e.match(ga)||[]}var ma=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function pa(e){return ma.test(e)}var ht="\\ud800-\\udfff",wa="\\u0300-\\u036f",xa="\\ufe20-\\ufe2f",ba="\\u20d0-\\u20ff",Ca=wa+xa+ba,ft="\\u2700-\\u27bf",gt="a-z\\xdf-\\xf6\\xf8-\\xff",ya="\\xac\\xb1\\xd7\\xf7",ka="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_a="\\u2000-\\u206f",Aa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vt="A-Z\\xc0-\\xd6\\xd8-\\xde",Sa="\\ufe0e\\ufe0f",mt=ya+ka+_a+Aa,pt="['’]",et="["+mt+"]",Ia="["+Ca+"]",wt="\\d+",za="["+ft+"]",xt="["+gt+"]",bt="[^"+ht+mt+wt+ft+gt+vt+"]",Da="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+Ia+"|"+Da+")",La="[^"+ht+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",yt="[\\ud800-\\udbff][\\udc00-\\udfff]",re="["+vt+"]",Ma="\\u200d",tt="(?:"+xt+"|"+bt+")",$a="(?:"+re+"|"+bt+")",at="(?:"+pt+"(?:d|ll|m|re|s|t|ve))?",nt="(?:"+pt+"(?:D|LL|M|RE|S|T|VE))?",kt=Oa+"?",_t="["+Sa+"]?",Pa="(?:"+Ma+"(?:"+[La,Ct,yt].join("|")+")"+_t+kt+")*",Ra="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ta="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ja=_t+kt+Pa,Na="(?:"+[za,Ct,yt].join("|")+")"+ja,Ha=RegExp([re+"?"+xt+"+"+at+"(?="+[et,re,"$"].join("|")+")",$a+"+"+nt+"(?="+[et,re+tt,"$"].join("|")+")",re+"?"+tt+"+"+at,re+"+"+nt,Ta,Ra,wt,Na].join("|"),"g");function Ba(e){return e.match(Ha)||[]}function Ea(e,o,s){return e=rt(e),o=o,o===void 0?pa(e)?Ba(e):va(e):e.match(o)||[]}var Ua="['’]",Va=RegExp(Ua,"g");function Wa(e){return function(o){return aa(Ea(fa(o).replace(Va,"")),e,"")}}var Za=Wa(function(e,o,s){return e+(s?"-":"")+o.toLowerCase()});function Fa(e,o){const s=Ue(It,null);return se(()=>e.hljs||(s==null?void 0:s.mergedHljsRef.value))}const Ya=_e("rotateClockwise",u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 12.7916 15.3658 15.2026 13 16.3265V14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5V17.5C12 17.7761 12.2239 18 12.5 18H15.5C15.7761 18 16 17.7761 16 17.5C16 17.2239 15.7761 17 15.5 17H13.8758C16.3346 15.6357 18 13.0128 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 10.2761 2.22386 10.5 2.5 10.5C2.77614 10.5 3 10.2761 3 10Z",fill:"currentColor"}),u("path",{d:"M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12ZM10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10C11 10.5523 10.5523 11 10 11Z",fill:"currentColor"}))),Xa=_e("rotateClockwise",u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 12.7916 4.63419 15.2026 7 16.3265V14.5C7 14.2239 7.22386 14 7.5 14C7.77614 14 8 14.2239 8 14.5V17.5C8 17.7761 7.77614 18 7.5 18H4.5C4.22386 18 4 17.7761 4 17.5C4 17.2239 4.22386 17 4.5 17H6.12422C3.66539 15.6357 2 13.0128 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 10.2761 17.7761 10.5 17.5 10.5C17.2239 10.5 17 10.2761 17 10Z",fill:"currentColor"}),u("path",{d:"M10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12ZM10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}))),Ja=_e("zoomIn",u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M11.5 8.5C11.5 8.22386 11.2761 8 11 8H9V6C9 5.72386 8.77614 5.5 8.5 5.5C8.22386 5.5 8 5.72386 8 6V8H6C5.72386 8 5.5 8.22386 5.5 8.5C5.5 8.77614 5.72386 9 6 9H8V11C8 11.2761 8.22386 11.5 8.5 11.5C8.77614 11.5 9 11.2761 9 11V9H11C11.2761 9 11.5 8.77614 11.5 8.5Z",fill:"currentColor"}),u("path",{d:"M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z",fill:"currentColor"}))),Ga=_e("zoomOut",u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M11 8C11.2761 8 11.5 8.22386 11.5 8.5C11.5 8.77614 11.2761 9 11 9H6C5.72386 9 5.5 8.77614 5.5 8.5C5.5 8.22386 5.72386 8 6 8H11Z",fill:"currentColor"}),u("path",{d:"M14 8.5C14 5.46243 11.5376 3 8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C9.83879 14 11.0659 13.5217 12.0196 12.7266L16.1464 16.8536L16.2157 16.9114C16.4106 17.0464 16.68 17.0271 16.8536 16.8536C17.0488 16.6583 17.0488 16.3417 16.8536 16.1464L12.7266 12.0196C13.5217 11.0659 14 9.83879 14 8.5ZM4 8.5C4 6.01472 6.01472 4 8.5 4C10.9853 4 13 6.01472 13 8.5C13 10.9853 10.9853 13 8.5 13C6.01472 13 4 10.9853 4 8.5Z",fill:"currentColor"}))),qa=G({name:"ResizeSmall",render(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u("g",{fill:"none"},u("path",{d:"M5.5 4A1.5 1.5 0 0 0 4 5.5v1a.5.5 0 0 1-1 0v-1A2.5 2.5 0 0 1 5.5 3h1a.5.5 0 0 1 0 1h-1zM16 5.5A1.5 1.5 0 0 0 14.5 4h-1a.5.5 0 0 1 0-1h1A2.5 2.5 0 0 1 17 5.5v1a.5.5 0 0 1-1 0v-1zm0 9a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 0 0 1h1a2.5 2.5 0 0 0 2.5-2.5v-1a.5.5 0 0 0-1 0v1zm-12 0A1.5 1.5 0 0 0 5.5 16h1.25a.5.5 0 0 1 0 1H5.5A2.5 2.5 0 0 1 3 14.5v-1.25a.5.5 0 0 1 1 0v1.25zM8.5 7A1.5 1.5 0 0 0 7 8.5v3A1.5 1.5 0 0 0 8.5 13h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 11.5 7h-3zM8 8.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3z",fill:"currentColor"})))}}),Ka=zt&&"loading"in document.createElement("img"),Qa=(e={})=>{var o;const{root:s=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(o=e.threshold)!==null&&o!==void 0?o:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof s=="string"?document.querySelector(s):s)||document.documentElement})}},He=new WeakMap,Be=new WeakMap,Ee=new WeakMap,en=(e,o,s)=>{if(!e)return()=>{};const m=Qa(o),{root:i}=m.options;let x;const D=He.get(i);D?x=D:(x=new Map,He.set(i,x));let z,k;x.has(m.hash)?(k=x.get(m.hash),k[1].has(e)||(z=k[0],k[1].add(e),z.observe(e))):(z=new IntersectionObserver(C=>{C.forEach($=>{if($.isIntersecting){const h=Be.get($.target),y=Ee.get($.target);h&&h(),y&&(y.value=!0)}})},m.options),z.observe(e),k=[z,new Set([e])],x.set(m.hash,k));let l=!1;const w=()=>{l||(Be.delete(e),Ee.delete(e),l=!0,k[1].has(e)&&(k[0].unobserve(e),k[1].delete(e)),k[1].size<=0&&x.delete(m.hash),x.size||He.delete(i))};return Be.set(e,w),Ee.set(e,s),w},tn=e=>{const{textColor2:o,fontSize:s,fontWeightStrong:m,textColor3:i}=e;return{textColor:o,fontSize:s,fontWeightStrong:m,"mono-3":"#a0a1a7","hue-1":"#0184bb","hue-2":"#4078f2","hue-3":"#a626a4","hue-4":"#50a14f","hue-5":"#e45649","hue-5-2":"#c91243","hue-6":"#986801","hue-6-2":"#c18401",lineNumberTextColor:i}},an={name:"Code",common:st,self:tn},nn=ae([J("code",`
 font-size: var(--n-font-size);
 font-family: var(--n-font-family);
 `,[We("show-line-numbers",`
 display: flex;
 `),Dt("line-numbers",`
 user-select: none;
 padding-right: 12px;
 text-align: right;
 transition: color .3s var(--n-bezier);
 color: var(--n-line-number-text-color);
 `),We("word-wrap",[ae("pre",`
 white-space: pre-wrap;
 word-break: break-all;
 `)]),ae("pre",`
 margin: 0;
 line-height: inherit;
 font-size: inherit;
 font-family: inherit;
 `),ae("[class^=hljs]",`
 color: var(--n-text-color);
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `)]),({props:e})=>{const o=`${e.bPrefix}code`;return[`${o} .hljs-comment,
 ${o} .hljs-quote {
 color: var(--n-mono-3);
 font-style: italic;
 }`,`${o} .hljs-doctag,
 ${o} .hljs-keyword,
 ${o} .hljs-formula {
 color: var(--n-hue-3);
 }`,`${o} .hljs-section,
 ${o} .hljs-name,
 ${o} .hljs-selector-tag,
 ${o} .hljs-deletion,
 ${o} .hljs-subst {
 color: var(--n-hue-5);
 }`,`${o} .hljs-literal {
 color: var(--n-hue-1);
 }`,`${o} .hljs-string,
 ${o} .hljs-regexp,
 ${o} .hljs-addition,
 ${o} .hljs-attribute,
 ${o} .hljs-meta-string {
 color: var(--n-hue-4);
 }`,`${o} .hljs-built_in,
 ${o} .hljs-class .hljs-title {
 color: var(--n-hue-6-2);
 }`,`${o} .hljs-attr,
 ${o} .hljs-variable,
 ${o} .hljs-template-variable,
 ${o} .hljs-type,
 ${o} .hljs-selector-class,
 ${o} .hljs-selector-attr,
 ${o} .hljs-selector-pseudo,
 ${o} .hljs-number {
 color: var(--n-hue-6);
 }`,`${o} .hljs-symbol,
 ${o} .hljs-bullet,
 ${o} .hljs-link,
 ${o} .hljs-meta,
 ${o} .hljs-selector-id,
 ${o} .hljs-title {
 color: var(--n-hue-2);
 }`,`${o} .hljs-emphasis {
 font-style: italic;
 }`,`${o} .hljs-strong {
 font-weight: var(--n-font-weight-strong);
 }`,`${o} .hljs-link {
 text-decoration: underline;
 }`]}]),on=Object.assign(Object.assign({},Ae.props),{language:String,code:{type:String,default:""},trim:{type:Boolean,default:!0},hljs:Object,uri:Boolean,inline:Boolean,wordWrap:Boolean,showLineNumbers:Boolean,internalFontSize:Number,internalNoHighlight:Boolean}),ln=G({name:"Code",props:on,setup(e,{slots:o}){const{internalNoHighlight:s}=e,{mergedClsPrefixRef:m,inlineThemeDisabled:i}=Ve(),x=_(null),D=s?{value:void 0}:Fa(e),z=(h,y,O)=>{const{value:R}=D;return!R||!(h&&R.getLanguage(h))?null:R.highlight(O?y.trim():y,{language:h}).value},k=se(()=>e.inline||e.wordWrap?!1:e.showLineNumbers),l=()=>{if(o.default)return;const{value:h}=x;if(!h)return;const{language:y}=e,O=e.uri?window.decodeURIComponent(e.code):e.code;if(y){const T=z(y,O,e.trim);if(T!==null){if(e.inline)h.innerHTML=T;else{const b=h.querySelector(".__code__");b&&h.removeChild(b);const V=document.createElement("pre");V.className="__code__",V.innerHTML=T,h.appendChild(V)}return}}if(e.inline){h.textContent=O;return}const R=h.querySelector(".__code__");if(R)R.textContent=O;else{const T=document.createElement("pre");T.className="__code__",T.textContent=O,h.innerHTML="",h.appendChild(T)}};ye(l),Ce(ke(e,"language"),l),Ce(ke(e,"code"),l),s||Ce(D,l);const w=Ae("Code","-code",nn,an,e,m),C=se(()=>{const{common:{cubicBezierEaseInOut:h,fontFamilyMono:y},self:{textColor:O,fontSize:R,fontWeightStrong:T,lineNumberTextColor:b,"mono-3":V,"hue-1":Y,"hue-2":de,"hue-3":ne,"hue-4":oe,"hue-5":L,"hue-5-2":te,"hue-6":le,"hue-6-2":q}}=w.value,{internalFontSize:W}=e;return{"--n-font-size":W?`${W}px`:R,"--n-font-family":y,"--n-font-weight-strong":T,"--n-bezier":h,"--n-text-color":O,"--n-mono-3":V,"--n-hue-1":Y,"--n-hue-2":de,"--n-hue-3":ne,"--n-hue-4":oe,"--n-hue-5":L,"--n-hue-5-2":te,"--n-hue-6":le,"--n-hue-6-2":q,"--n-line-number-text-color":b}}),$=i?it("code",se(()=>`${e.internalFontSize||"a"}`),C,e):void 0;return{mergedClsPrefix:m,codeRef:x,mergedShowLineNumbers:k,lineNumbers:se(()=>{let h=1;const y=[];let O=!1;for(const R of e.code)R===`
`?(O=!0,y.push(h++)):O=!1;return O||y.push(h++),y.join(`
`)}),cssVars:i?void 0:C,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender}},render(){var e,o;const{mergedClsPrefix:s,wordWrap:m,mergedShowLineNumbers:i,onRender:x}=this;return x==null||x(),u("code",{class:[`${s}-code`,this.themeClass,m&&`${s}-code--word-wrap`,i&&`${s}-code--show-line-numbers`],style:this.cssVars,ref:"codeRef"},i?u("pre",{class:`${s}-code__line-numbers`},this.lineNumbers):null,(o=(e=this.$slots).default)===null||o===void 0?void 0:o.call(e))}}),At=Object.assign(Object.assign({},Ae.props),{onPreviewPrev:Function,onPreviewNext:Function,showToolbar:{type:Boolean,default:!0},showToolbarTooltip:Boolean}),St=ut("n-image");function rn(){return{toolbarIconColor:"rgba(255, 255, 255, .9)",toolbarColor:"rgba(0, 0, 0, .35)",toolbarBoxShadow:"none",toolbarBorderRadius:"24px"}}const sn=Ot({name:"Image",common:st,peers:{Tooltip:Zt},self:rn}),un=u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M6 5C5.75454 5 5.55039 5.17688 5.50806 5.41012L5.5 5.5V14.5C5.5 14.7761 5.72386 15 6 15C6.24546 15 6.44961 14.8231 6.49194 14.5899L6.5 14.5V5.5C6.5 5.22386 6.27614 5 6 5ZM13.8536 5.14645C13.68 4.97288 13.4106 4.9536 13.2157 5.08859L13.1464 5.14645L8.64645 9.64645C8.47288 9.82001 8.4536 10.0894 8.58859 10.2843L8.64645 10.3536L13.1464 14.8536C13.3417 15.0488 13.6583 15.0488 13.8536 14.8536C14.0271 14.68 14.0464 14.4106 13.9114 14.2157L13.8536 14.1464L9.70711 10L13.8536 5.85355C14.0488 5.65829 14.0488 5.34171 13.8536 5.14645Z",fill:"currentColor"})),cn=u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M13.5 5C13.7455 5 13.9496 5.17688 13.9919 5.41012L14 5.5V14.5C14 14.7761 13.7761 15 13.5 15C13.2545 15 13.0504 14.8231 13.0081 14.5899L13 14.5V5.5C13 5.22386 13.2239 5 13.5 5ZM5.64645 5.14645C5.82001 4.97288 6.08944 4.9536 6.28431 5.08859L6.35355 5.14645L10.8536 9.64645C11.0271 9.82001 11.0464 10.0894 10.9114 10.2843L10.8536 10.3536L6.35355 14.8536C6.15829 15.0488 5.84171 15.0488 5.64645 14.8536C5.47288 14.68 5.4536 14.4106 5.58859 14.2157L5.64645 14.1464L9.79289 10L5.64645 5.85355C5.45118 5.65829 5.45118 5.34171 5.64645 5.14645Z",fill:"currentColor"})),dn=u("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"})),hn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},u("path",{fill:"currentColor",d:"M505.7 661a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"})),fn=ae([ae("body >",[J("image-container","position: fixed;")]),J("image-preview-container",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 `),J("image-preview-overlay",`
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background: rgba(0, 0, 0, .3);
 `,[Ze()]),J("image-preview-toolbar",`
 z-index: 1;
 position: absolute;
 left: 50%;
 transform: translateX(-50%);
 border-radius: var(--n-toolbar-border-radius);
 height: 48px;
 bottom: 40px;
 padding: 0 12px;
 background: var(--n-toolbar-color);
 box-shadow: var(--n-toolbar-box-shadow);
 color: var(--n-toolbar-icon-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 `,[J("base-icon",`
 padding: 0 8px;
 font-size: 28px;
 cursor: pointer;
 `),Ze()]),J("image-preview-wrapper",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 pointer-events: none;
 `,[Lt()]),J("image-preview",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: all;
 margin: auto;
 max-height: calc(100vh - 32px);
 max-width: calc(100vw - 32px);
 transition: transform .3s var(--n-bezier);
 `),J("image",`
 display: inline-flex;
 max-height: 100%;
 max-width: 100%;
 `,[Mt("preview-disabled",`
 cursor: pointer;
 `),ae("img",`
 border-radius: inherit;
 `)])]),xe=32,gn=G({name:"ImagePreview",props:Object.assign(Object.assign({},At),{onNext:Function,onPrev:Function,clsPrefix:{type:String,required:!0}}),setup(e){const o=Ae("Image","-image",fn,sn,e,ke(e,"clsPrefix"));let s=null;const m=_(null),i=_(null),x=_(void 0),D=_(!1),z=_(!1),{localeRef:k}=Ft("Image");function l(){const{value:r}=i;if(!s||!r)return;const{style:d}=r,c=s.getBoundingClientRect(),S=c.left+c.width/2,I=c.top+c.height/2;d.transformOrigin=`${S}px ${I}px`}function w(r){var d,c;switch(r.key){case" ":r.preventDefault();break;case"ArrowLeft":(d=e.onPrev)===null||d===void 0||d.call(e);break;case"ArrowRight":(c=e.onNext)===null||c===void 0||c.call(e);break;case"Escape":ve();break}}Ce(D,r=>{r?je("keydown",document,w):me("keydown",document,w)}),ct(()=>{me("keydown",document,w)});let C=0,$=0,h=0,y=0,O=0,R=0,T=0,b=0,V=!1;function Y(r){const{clientX:d,clientY:c}=r;h=d-C,y=c-$,Xt(U)}function de(r){const{mouseUpClientX:d,mouseUpClientY:c,mouseDownClientX:S,mouseDownClientY:I}=r,B=S-d,Z=I-c,F=`vertical${Z>0?"Top":"Bottom"}`,Q=`horizontal${B>0?"Left":"Right"}`;return{moveVerticalDirection:F,moveHorizontalDirection:Q,deltaHorizontal:B,deltaVertical:Z}}function ne(r){const{value:d}=m;if(!d)return{offsetX:0,offsetY:0};const c=d.getBoundingClientRect(),{moveVerticalDirection:S,moveHorizontalDirection:I,deltaHorizontal:B,deltaVertical:Z}=r||{};let F=0,Q=0;return c.width<=window.innerWidth?F=0:c.left>0?F=(c.width-window.innerWidth)/2:c.right<window.innerWidth?F=-(c.width-window.innerWidth)/2:I==="horizontalRight"?F=Math.min((c.width-window.innerWidth)/2,O-(B??0)):F=Math.max(-((c.width-window.innerWidth)/2),O-(B??0)),c.height<=window.innerHeight?Q=0:c.top>0?Q=(c.height-window.innerHeight)/2:c.bottom<window.innerHeight?Q=-(c.height-window.innerHeight)/2:S==="verticalBottom"?Q=Math.min((c.height-window.innerHeight)/2,R-(Z??0)):Q=Math.max(-((c.height-window.innerHeight)/2),R-(Z??0)),{offsetX:F,offsetY:Q}}function oe(r){me("mousemove",document,Y),me("mouseup",document,oe);const{clientX:d,clientY:c}=r;V=!1;const S=de({mouseUpClientX:d,mouseUpClientY:c,mouseDownClientX:T,mouseDownClientY:b}),I=ne(S);h=I.offsetX,y=I.offsetY,U()}const L=Ue(St,null);function te(r){var d,c;if((c=(d=L==null?void 0:L.previewedImgPropsRef.value)===null||d===void 0?void 0:d.onMousedown)===null||c===void 0||c.call(d,r),r.button!==0)return;const{clientX:S,clientY:I}=r;V=!0,C=S-h,$=I-y,O=h,R=y,T=S,b=I,U(),je("mousemove",document,Y),je("mouseup",document,oe)}function le(r){var d,c;(c=(d=L==null?void 0:L.previewedImgPropsRef.value)===null||d===void 0?void 0:d.onDblclick)===null||c===void 0||c.call(d,r);const S=ge();N=N===S?1:S,U()}const q=1.5;let W=0,N=1,K=0;function he(){N=1,W=0}function Se(){var r;he(),K=0,(r=e.onPrev)===null||r===void 0||r.call(e)}function Ie(){var r;he(),K=0,(r=e.onNext)===null||r===void 0||r.call(e)}function ze(){K-=90,U()}function De(){K+=90,U()}function Oe(){const{value:r}=m;if(!r)return 1;const{innerWidth:d,innerHeight:c}=window,S=Math.max(1,r.naturalHeight/(c-xe)),I=Math.max(1,r.naturalWidth/(d-xe));return Math.max(3,S*2,I*2)}function ge(){const{value:r}=m;if(!r)return 1;const{innerWidth:d,innerHeight:c}=window,S=r.naturalHeight/(c-xe),I=r.naturalWidth/(d-xe);return S<1&&I<1?1:Math.max(S,I)}function Le(){const r=Oe();N<r&&(W+=1,N=Math.min(r,Math.pow(q,W)),U())}function Me(){if(N>.5){const r=N;W-=1,N=Math.max(.5,Math.pow(q,W));const d=r-N;U(!1);const c=ne();N+=d,U(!1),N-=d,h=c.offsetX,y=c.offsetY,U()}}function $e(){const r=x.value;r&&qt(r,void 0)}function U(r=!0){var d;const{value:c}=m;if(!c)return;const{style:S}=c,I=dt((d=L==null?void 0:L.previewedImgPropsRef.value)===null||d===void 0?void 0:d.style);let B="";if(typeof I=="string")B=I+";";else for(const F in I)B+=`${Za(F)}: ${I[F]};`;const Z=`transform-origin: center; transform: translateX(${h}px) translateY(${y}px) rotate(${K}deg) scale(${N});`;V?S.cssText=B+"cursor: grabbing; transition: none;"+Z:S.cssText=B+"cursor: grab;"+Z+(r?"":"transition: none;"),r||c.offsetHeight}function ve(){D.value=!D.value,z.value=!0}function Pe(){N=ge(),W=Math.ceil(Math.log(N)/Math.log(q)),h=0,y=0,U()}const Re={setPreviewSrc:r=>{x.value=r},setThumbnailEl:r=>{s=r},toggleShow:ve};function t(r,d){if(e.showToolbarTooltip){const{value:c}=o;return u(Yt,{to:!1,theme:c.peers.Tooltip,themeOverrides:c.peerOverrides.Tooltip,keepAliveOnHover:!1},{default:()=>k.value[d],trigger:()=>r})}else return r}const a=se(()=>{const{common:{cubicBezierEaseInOut:r},self:{toolbarIconColor:d,toolbarBorderRadius:c,toolbarBoxShadow:S,toolbarColor:I}}=o.value;return{"--n-bezier":r,"--n-toolbar-icon-color":d,"--n-toolbar-color":I,"--n-toolbar-border-radius":c,"--n-toolbar-box-shadow":S}}),{inlineThemeDisabled:n}=Ve(),A=n?it("image-preview",void 0,a,e):void 0;return Object.assign({previewRef:m,previewWrapperRef:i,previewSrc:x,show:D,appear:$t(),displayed:z,previewedImgProps:L==null?void 0:L.previewedImgPropsRef,handleWheel(r){r.preventDefault()},handlePreviewMousedown:te,handlePreviewDblclick:le,syncTransformOrigin:l,handleAfterLeave:()=>{he(),K=0,z.value=!1},handleDragStart:r=>{var d,c;(c=(d=L==null?void 0:L.previewedImgPropsRef.value)===null||d===void 0?void 0:d.onDragstart)===null||c===void 0||c.call(d,r),r.preventDefault()},zoomIn:Le,zoomOut:Me,handleDownloadClick:$e,rotateCounterclockwise:ze,rotateClockwise:De,handleSwitchPrev:Se,handleSwitchNext:Ie,withTooltip:t,resizeToOrignalImageSize:Pe,cssVars:n?void 0:a,themeClass:A==null?void 0:A.themeClass,onRender:A==null?void 0:A.onRender},Re)},render(){var e,o;const{clsPrefix:s}=this;return u(ie,null,(o=(e=this.$slots).default)===null||o===void 0?void 0:o.call(e),u(Pt,{show:this.show},{default:()=>{var m;return this.show||this.displayed?((m=this.onRender)===null||m===void 0||m.call(this),Fe(u("div",{class:[`${s}-image-preview-container`,this.themeClass],style:this.cssVars,onWheel:this.handleWheel},u(Te,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?u("div",{class:`${s}-image-preview-overlay`,onClick:this.toggleShow}):null}),this.showToolbar?u(Te,{name:"fade-in-transition",appear:this.appear},{default:()=>{if(!this.show)return null;const{withTooltip:i}=this;return u("div",{class:`${s}-image-preview-toolbar`},this.onPrev?u(ie,null,i(u(X,{clsPrefix:s,onClick:this.handleSwitchPrev},{default:()=>un}),"tipPrevious"),i(u(X,{clsPrefix:s,onClick:this.handleSwitchNext},{default:()=>cn}),"tipNext")):null,i(u(X,{clsPrefix:s,onClick:this.rotateCounterclockwise},{default:()=>u(Xa,null)}),"tipCounterclockwise"),i(u(X,{clsPrefix:s,onClick:this.rotateClockwise},{default:()=>u(Ya,null)}),"tipClockwise"),i(u(X,{clsPrefix:s,onClick:this.resizeToOrignalImageSize},{default:()=>u(qa,null)}),"tipOriginalSize"),i(u(X,{clsPrefix:s,onClick:this.zoomOut},{default:()=>u(Ga,null)}),"tipZoomOut"),i(u(X,{clsPrefix:s,onClick:this.zoomIn},{default:()=>u(Ja,null)}),"tipZoomIn"),i(u(X,{clsPrefix:s,onClick:this.handleDownloadClick},{default:()=>hn}),"tipDownload"),i(u(X,{clsPrefix:s,onClick:this.toggleShow},{default:()=>dn}),"tipClose"))}}):null,u(Te,{name:"fade-in-scale-up-transition",onAfterLeave:this.handleAfterLeave,appear:this.appear,onEnter:this.syncTransformOrigin,onBeforeLeave:this.syncTransformOrigin},{default:()=>{const{previewedImgProps:i={}}=this;return Fe(u("div",{class:`${s}-image-preview-wrapper`,ref:"previewWrapperRef"},u("img",Object.assign({},i,{draggable:!1,onMousedown:this.handlePreviewMousedown,onDblclick:this.handlePreviewDblclick,class:[`${s}-image-preview`,i.class],key:this.previewSrc,src:this.previewSrc,ref:"previewRef",onDragstart:this.handleDragStart}))),[[Tt,this.show]])}})),[[Rt,{enabled:this.show}]])):null}}))}}),vn=ut("n-image-group"),mn=Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},At),be=G({name:"Image",props:mn,inheritAttrs:!1,setup(e){const o=_(null),s=_(!1),m=_(null),i=Ue(vn,null),{mergedClsPrefixRef:x}=i||Ve(e),D={click:()=>{if(e.previewDisabled||s.value)return;const l=e.previewSrc||e.src;if(i){i.setPreviewSrc(l),i.setThumbnailEl(o.value),i.toggleShow();return}const{value:w}=m;w&&(w.setPreviewSrc(l),w.setThumbnailEl(o.value),w.toggleShow())}},z=_(!e.lazy);ye(()=>{var l;(l=o.value)===null||l===void 0||l.setAttribute("data-group-id",(i==null?void 0:i.groupId)||"")}),ye(()=>{if(e.lazy&&e.intersectionObserverOptions){let l;const w=Ye(()=>{l==null||l(),l=void 0,l=en(o.value,e.intersectionObserverOptions,z)});ct(()=>{w(),l==null||l()})}}),Ye(()=>{var l;e.src||((l=e.imgProps)===null||l===void 0||l.src),s.value=!1});const k=_(!1);return jt(St,{previewedImgPropsRef:ke(e,"previewedImgProps")}),Object.assign({mergedClsPrefix:x,groupId:i==null?void 0:i.groupId,previewInstRef:m,imageRef:o,showError:s,shouldStartLoading:z,loaded:k,mergedOnClick:l=>{var w,C;D.click(),(C=(w=e.imgProps)===null||w===void 0?void 0:w.onClick)===null||C===void 0||C.call(w,l)},mergedOnError:l=>{if(!z.value)return;s.value=!0;const{onError:w,imgProps:{onError:C}={}}=e;w==null||w(l),C==null||C(l)},mergedOnLoad:l=>{const{onLoad:w,imgProps:{onLoad:C}={}}=e;w==null||w(l),C==null||C(l),k.value=!0}},D)},render(){var e,o;const{mergedClsPrefix:s,imgProps:m={},loaded:i,$attrs:x,lazy:D}=this,z=(o=(e=this.$slots).placeholder)===null||o===void 0?void 0:o.call(e),k=this.src||m.src,l=u("img",Object.assign(Object.assign({},m),{ref:"imageRef",width:this.width||m.width,height:this.height||m.height,src:this.showError?this.fallbackSrc:D&&this.intersectionObserverOptions?this.shouldStartLoading?k:void 0:k,alt:this.alt||m.alt,"aria-label":this.alt||m.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:Ka&&D&&!this.intersectionObserverOptions?"lazy":"eager",style:[m.style||"",z&&!i?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return u("div",Object.assign({},x,{role:"none",class:[x.class,`${s}-image`,(this.previewDisabled||this.showError)&&`${s}-image--preview-disabled`]}),this.groupId?l:u(gn,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:s,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip},{default:()=>l}),!i&&z)}}),pn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},wn=v("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z",fill:"currentColor"},null,-1),xn=[wn],ot=G({name:"DeleteOutlined",render:function(o,s){return M(),P("svg",pn,xn)}}),bn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Cn=v("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1),yn=[Cn],lt=G({name:"EditOutlined",render:function(o,s){return M(),P("svg",bn,yn)}}),kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},_n=v("path",{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 0 0-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),An=[_n],Sn=G({name:"UploadOutlined",render:function(o,s){return M(),P("svg",kn,An)}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},zn=v("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Dn=v("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 255.79l-64-64l-64 64"},null,-1),On=v("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 448.21V207.79"},null,-1),Ln=[zn,Dn,On],Mn=G({name:"CloudUploadOutline",render:function(o,s){return M(),P("svg",In,Ln)}}),$n=e=>ue.get("/htmllib/list",{params:e}),Pn=e=>ue.get(`/htmllib/${e}`),Rn=e=>ue.post("/htmllib/create",e),Tn=e=>ue.post("/htmllib/update",e),jn=e=>ue.post("/htmllib/delete",{id:e}),Nn=(e,o)=>{const s=new FormData;return s.append("file",e),ue.post("/htmllib/upload-thumbnail",s,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4,onUploadProgress:o})},ce=e=>(Et("data-v-ba367bc1"),e=e(),Ut(),e),Hn={class:"container"},Bn={key:1},En={key:0},Un=["colspan"],Vn={class:"pagination-container"},Wn={class:"text-items-container"},Zn=ce(()=>v("div",{class:"text-description mb-2"},[v("p",null,"输入模板中需要替换的原始文本，系统将直接根据这些文本进行精确匹配和替换")],-1)),Fn={class:"text-items-input mb-2"},Yn={class:"text-items-list"},Xn={key:0,class:"empty-text-items"},Jn={class:"text-count mt-2"},Gn={class:"background-images-container"},qn=ce(()=>v("div",{class:"background-description mb-2"},[v("p",null,"添加可选的背景图片URL列表，用户可从中选择一个作为背景图片")],-1)),Kn={class:"background-images-input mb-2"},Qn={class:"background-images-list"},eo={key:0,class:"empty-background-images"},to={class:"background-image-preview"},ao={class:"background-url-text"},no={class:"background-count mt-2"},oo={key:0,class:"file-preview"},lo={class:"file-info"},ro={class:"file-name"},so={key:1,class:"existing-file"},io={key:2,class:"upload-placeholder"},uo=ce(()=>v("div",{class:"upload-text"},"点击或拖动文件到此区域选择",-1)),co=ce(()=>v("div",{class:"upload-hint"},"支持JPG, PNG, GIF格式图片，文件将在点击保存按钮后上传",-1)),ho=ce(()=>v("div",{class:"text-hint"}," 当启用此选项时，在用户未提供文本替换内容时，将自动使用AI生成内容 ",-1)),fo={style:{display:"flex","justify-content":"flex-end","margin-top":"20px"}},go={class:"html-preview"},vo={class:"html-preview-iframe-container"},mo=ce(()=>v("div",{class:"html-preview-title"},"效果预览",-1)),po=["srcdoc"],wo={style:{display:"flex","justify-content":"flex-end","margin-top":"20px"}},xo=G({__name:"htmllib",setup(e){const o=_([]),s=_(!1),m=Xe({page:1,pageSize:10,itemCount:0,pageSizes:[10,20,30,50]}),i=Jt(),x=_(!1),D=_(!1),z=_(""),k=_(!0),l=Xe({id:null,name:"",htmlCode:"",imageCount:1,textDetails:[],thumbnailPath:"",status:1,needAiContent:!1,backgroundImages:[]}),w=_(!1),C=_({file:null,name:"",size:0}),$=_(""),h=_([]),y=_(null),O=_(0),R=_(!1),T=_(""),b=_([]),V=[{title:"ID",key:"id",width:60},{title:"模板名称",key:"name",width:160},{title:"缩略图",key:"thumbnailPath",width:120,render(t){return t.thumbnailPath?u(be,{src:t.thumbnailPath,width:80,height:45,objectFit:"contain"}):"无缩略图"}},{title:"图片数量",key:"imageCount",width:80},{title:"文本数量",key:"textCount",width:80,render(t){let a=0;if(t.textDetails){if(Array.isArray(t.textDetails))a=t.textDetails.length;else if(typeof t.textDetails=="string")try{const n=JSON.parse(t.textDetails);Array.isArray(n)&&(a=n.length)}catch{a=t.textDetails.split(",").filter(Boolean).length}}return a===0&&t.textDetailsArray&&Array.isArray(t.textDetailsArray)&&(a=t.textDetailsArray.length),a}},{title:"背景图片数量",key:"backgroundCount",width:100,render(t){let a=0;if(t.backgroundImages){if(Array.isArray(t.backgroundImages))a=t.backgroundImages.length;else if(typeof t.backgroundImages=="string")try{const n=JSON.parse(t.backgroundImages);Array.isArray(n)&&(a=n.length)}catch{a=0}}return a===0&&t.backgroundImagesArray&&Array.isArray(t.backgroundImagesArray)&&(a=t.backgroundImagesArray.length),a}},{title:"使用应用工作流",key:"status",width:120,render(t){return u(Ge,{type:t.status===1?"success":"error",size:"small"},{default:()=>t.status===1?"启用":"禁用"})}},{title:"创建时间",key:"createdAt",width:180,render(t){return new Date(t.createdAt).toLocaleString()}},{title:"操作",key:"actions",width:300,render(t){return u(qe,{align:"center",justify:"center"},{default:()=>[u(H,{size:"small",type:"primary",onClick:()=>L(t)},{default:()=>"编辑",icon:()=>u(lt)}),u(H,{size:"small",type:"info",onClick:()=>W(t.htmlCode)},{default:()=>"预览HTML"}),u(Qe,{onPositiveClick:()=>q(t.id),negativeText:"取消",positiveText:"确定"},{default:()=>"确定删除该模板吗？",trigger:()=>u(H,{size:"small",type:"error"},{default:()=>"删除",icon:()=>u(ot)})})]})}}],Y=async()=>{s.value=!0;try{const t=await $n({page:m.page,pageSize:m.pageSize});t.data.items&&Array.isArray(t.data.items)?o.value=t.data.items.map(a=>{try{if(a.textDetails&&typeof a.textDetails=="string")try{const n=JSON.parse(a.textDetails);a.textDetailsArray=Array.isArray(n)?n:[]}catch{a.textDetailsArray=a.textDetails.split(",").filter(Boolean)}else Array.isArray(a.textDetails)?a.textDetailsArray=[...a.textDetails]:a.textDetailsArray=[]}catch(n){console.error("解析模板文本详情失败:",n),a.textDetailsArray=[]}return a}):o.value=[],m.itemCount=t.data.total||0}catch(t){console.error("加载HTML模板列表失败:",t),i.error("加载HTML模板列表失败")}finally{s.value=!1}},de=t=>{m.page=t,Y()},ne=t=>{m.pageSize=t,Y()},oe=()=>{k.value=!0,N(),h.value=[],x.value=!0},L=async t=>{k.value=!1,Object.assign(l,t);try{try{const a=await Pn(t.id);if(a.data&&a.data.success&&a.data.data){const n=a.data.data;if(n.textDetails)if(typeof n.textDetails=="string")try{h.value=JSON.parse(n.textDetails)}catch{h.value=n.textDetails.split(",").filter(Boolean)}else Array.isArray(n.textDetails)&&(h.value=n.textDetails);else te(t);if(n.backgroundImages)if(typeof n.backgroundImages=="string")try{b.value=JSON.parse(n.backgroundImages)}catch{b.value=[]}else Array.isArray(n.backgroundImages)?b.value=n.backgroundImages:n.backgroundImagesArray&&Array.isArray(n.backgroundImagesArray)?b.value=n.backgroundImagesArray:b.value=[];else b.value=[]}else te(t),le(t)}catch(a){console.error("获取模板详情失败，回退到本地解析:",a),te(t),le(t)}}catch(a){console.error("解析文本详情失败:",a),h.value=[],b.value=[]}x.value=!0},te=t=>{if(t.textDetailsArray&&Array.isArray(t.textDetailsArray)){h.value=[...t.textDetailsArray];return}if(t.textDetails)if(Array.isArray(t.textDetails))h.value=[...t.textDetails];else if(typeof t.textDetails=="string")try{const a=JSON.parse(t.textDetails);Array.isArray(a)?h.value=a:h.value=[]}catch{h.value=t.textDetails.split(",").map(n=>n.trim()).filter(Boolean)}else h.value=[];else h.value=[]},le=t=>{if(t.backgroundImagesArray&&Array.isArray(t.backgroundImagesArray)){b.value=[...t.backgroundImagesArray];return}if(t.backgroundImages)if(Array.isArray(t.backgroundImages))b.value=[...t.backgroundImages];else if(typeof t.backgroundImages=="string")try{const a=JSON.parse(t.backgroundImages);Array.isArray(a)?b.value=a:b.value=[]}catch{b.value=[]}else b.value=[];else b.value=[]},q=async t=>{try{await jn(t),i.success("删除成功"),Y()}catch(a){console.error("删除失败:",a),i.error("删除失败")}},W=t=>{z.value=t,D.value=!0},N=()=>{l.id=null,l.name="",l.htmlCode="",l.imageCount=1,l.textDetails=[],l.thumbnailPath="",l.status=1,l.needAiContent=!1,l.backgroundImages=[],C.value={file:null,name:"",size:0},h.value=[],b.value=[],O.value=0,R.value=!1},K=()=>{$.value.trim()&&(h.value.push($.value.trim()),$.value="")},he=t=>{h.value.splice(t,1)},Se=()=>{y.value&&y.value.click()},Ie=t=>{const a=t.target;if(a.files&&a.files.length>0){const n=a.files[0];C.value={file:n,name:n.name,size:Math.round(n.size/1024)}}},ze=()=>{C.value={file:null,name:"",size:0},y.value&&(y.value.value="")},De=t=>{t.preventDefault()},Oe=t=>{t.preventDefault()},ge=t=>{t.preventDefault()},Le=t=>{if(t.preventDefault(),t.dataTransfer&&t.dataTransfer.files.length>0){const a=t.dataTransfer.files[0];if(!["image/jpeg","image/png","image/gif","image/jpg"].includes(a.type)){i.error("请上传图片格式文件 (JPG, PNG, GIF)");return}C.value={file:a,name:a.name,size:Math.round(a.size/1024)}}},Me=async()=>{if(!C.value.file)return null;R.value=!0,O.value=0;try{return(await Nn(C.value.file,a=>{a.total&&(O.value=Math.round(a.loaded/a.total*100))})).data.data.thumbnailPath}catch(t){return console.error("上传缩略图失败:",t),i.error("上传缩略图失败"),null}finally{R.value=!1}},$e=()=>{T.value.trim()&&(b.value.push(T.value.trim()),T.value="")},U=t=>{b.value.splice(t,1)},ve=async()=>{if(!l.name){i.error("请填写模板名称");return}if(!l.htmlCode){i.error("请填写HTML代码");return}w.value=!0;try{let t=l.thumbnailPath;if(C.value.file&&(t=await Me(),!t)){w.value=!1;return}const a=h.value.filter(d=>d.trim()).map(d=>d.trim()),n=[...new Set(a)];a.length!==h.value.length&&i.warning("已自动移除空白文本项"),n.length!==a.length&&i.warning("已自动移除重复文本项"),h.value=n;const A=b.value.filter(d=>d.trim()).map(d=>d.trim()),r=[...new Set(A)];if(A.length!==b.value.length&&i.warning("已自动移除空白背景图片URL"),r.length!==A.length&&i.warning("已自动移除重复背景图片URL"),b.value=r,k.value){const d={name:l.name,htmlCode:l.htmlCode,imageCount:l.imageCount,thumbnailPath:t,textDetails:n,backgroundImages:r,status:l.status,needAiContent:l.needAiContent};await Rn(d),i.success("添加成功")}else{if(l.id===null){i.error("模板ID不能为空"),w.value=!1;return}const d={id:l.id,name:l.name,htmlCode:l.htmlCode,imageCount:l.imageCount,thumbnailPath:t,textDetails:n,backgroundImages:r,status:l.status,needAiContent:l.needAiContent};await Tn(d),i.success("更新成功")}x.value=!1,Y()}catch(t){console.error("保存HTML模板失败:",t),t.code==="ECONNABORTED"||t.message&&t.message.includes("timeout")?i.error("上传超时，请尝试减小文件大小"):i.error(k.value?"添加失败":"更新失败")}finally{w.value=!1}},Pe=t=>{let a=0;if(t.textDetails){if(Array.isArray(t.textDetails))a=t.textDetails.length;else if(typeof t.textDetails=="string")try{const n=JSON.parse(t.textDetails);Array.isArray(n)&&(a=n.length)}catch{a=t.textDetails.split(",").filter(Boolean).length}}return a===0&&t.textDetailsArray&&Array.isArray(t.textDetailsArray)&&(a=t.textDetailsArray.length),a},Re=t=>{let a=0;if(t.backgroundImages){if(Array.isArray(t.backgroundImages))a=t.backgroundImages.length;else if(typeof t.backgroundImages=="string")try{const n=JSON.parse(t.backgroundImages);Array.isArray(n)&&(a=n.length)}catch{a=0}}return a===0&&t.backgroundImagesArray&&Array.isArray(t.backgroundImagesArray)&&(a=t.backgroundImagesArray.length),a};return ye(()=>{Y()}),(t,a)=>(M(),P("div",Hn,[g(f(Ht),{title:"HTML模板库",class:"mb-4"},{"header-extra":p(()=>[g(f(H),{type:"primary",onClick:oe},{icon:p(()=>[g(f(fe),null,{default:p(()=>[g(f(Wt))]),_:1})]),default:p(()=>[j(" 添加HTML模板 ")]),_:1})]),default:p(()=>[g(f(Kt),{striped:"",loading:s.value},{default:p(()=>[v("thead",null,[v("tr",null,[(M(),P(ie,null,pe(V,n=>v("th",{key:n.key,style:dt({width:n.width+"px"})},E(n.title),5)),64))])]),v("tbody",null,[(M(!0),P(ie,null,pe(o.value,n=>(M(),P("tr",{key:n.id},[v("td",null,E(n.id),1),v("td",null,E(n.name),1),v("td",null,[n.thumbnailPath?(M(),Nt(f(be),{key:0,src:n.thumbnailPath,width:"80",height:"45","object-fit":"contain"},null,8,["src"])):(M(),P("span",Bn,"无"))]),v("td",null,E(n.imageCount),1),v("td",null,E(Pe(n)),1),v("td",null,E(Re(n)),1),v("td",null,[g(f(Ge),{type:n.status===1?"success":"error",size:"small"},{default:p(()=>[j(E(n.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),v("td",null,E(new Date(n.createdAt).toLocaleString()),1),v("td",null,[g(f(qe),null,{default:p(()=>[g(f(H),{size:"small",type:"primary",onClick:A=>L(n)},{icon:p(()=>[g(f(fe),null,{default:p(()=>[g(f(lt))]),_:1})]),default:p(()=>[j(" 编辑 ")]),_:2},1032,["onClick"]),g(f(H),{size:"small",type:"info",onClick:A=>W(n.htmlCode)},{default:p(()=>[j(" 预览HTML ")]),_:2},1032,["onClick"]),g(f(Qe),{onPositiveClick:A=>q(n.id),"negative-text":"取消","positive-text":"确定"},{trigger:p(()=>[g(f(H),{size:"small",type:"error"},{icon:p(()=>[g(f(fe),null,{default:p(()=>[g(f(ot))]),_:1})]),default:p(()=>[j(" 删除 ")]),_:1})]),default:p(()=>[j(" 确定删除该模板吗？ ")]),_:2},1032,["onPositiveClick"])]),_:2},1024)])]))),128)),o.value.length===0?(M(),P("tr",En,[v("td",{colspan:V.length,class:"text-center py-4"},"暂无数据",8,Un)])):Ne("",!0)])]),_:1},8,["loading"]),v("div",Vn,[g(f(Gt),{page:m.page,"onUpdate:page":[a[0]||(a[0]=n=>m.page=n),de],"page-size":m.pageSize,"onUpdate:pageSize":[a[1]||(a[1]=n=>m.pageSize=n),ne],"item-count":m.itemCount,"page-sizes":m.pageSizes,"show-size-picker":"","show-quick-jumper":""},null,8,["page","page-size","item-count","page-sizes"])])]),_:1}),g(f(Je),{show:x.value,"onUpdate:show":a[10]||(a[10]=n=>x.value=n),title:k.value?"添加HTML模板":"编辑HTML模板",preset:"card",style:{width:"700px"}},{default:p(()=>[g(f(Qt),{show:w.value},{default:p(()=>[g(f(ea),{"label-placement":"left","label-width":"120","require-mark-placement":"right-hanging"},{default:p(()=>[g(f(ee),{label:"模板名称",required:""},{default:p(()=>[g(f(we),{value:l.name,"onUpdate:value":a[2]||(a[2]=n=>l.name=n),placeholder:"请输入模板名称",style:{"max-width":"350px"}},null,8,["value"])]),_:1}),g(f(ee),{label:"HTML代码",required:""},{default:p(()=>[g(f(we),{value:l.htmlCode,"onUpdate:value":a[3]||(a[3]=n=>l.htmlCode=n),type:"textarea",placeholder:"请输入HTML代码",autosize:{minRows:6,maxRows:15},style:{width:"100%","font-family":"monospace"}},null,8,["value"])]),_:1}),g(f(ee),{label:"可替换图片数"},{default:p(()=>[g(f(ta),{value:l.imageCount,"onUpdate:value":a[4]||(a[4]=n=>l.imageCount=n),min:0},null,8,["value"])]),_:1}),g(f(ee),{label:"文本项列表"},{default:p(()=>[v("div",Wn,[Zn,v("div",Fn,[g(f(we),{value:$.value,"onUpdate:value":a[5]||(a[5]=n=>$.value=n),placeholder:"请输入需要替换的原始文本",style:{width:"200px"}},null,8,["value"]),g(f(H),{type:"primary",size:"small",onClick:K,class:"ml-2"},{default:p(()=>[j("添加")]),_:1})]),v("div",Yn,[h.value.length===0?(M(),P("div",Xn,"暂无文本项，请添加需要替换的文本")):Ne("",!0),(M(!0),P(ie,null,pe(h.value,(n,A)=>(M(),P("div",{key:A,class:"text-item"},[v("span",null,E(n),1),g(f(H),{size:"small",type:"error",onClick:r=>he(A)},{default:p(()=>[j("删除")]),_:2},1032,["onClick"])]))),128))]),v("div",Jn,"当前文本数量: "+E(h.value.length),1)])]),_:1}),g(f(ee),{label:"背景图片列表"},{default:p(()=>[v("div",Gn,[qn,v("div",Kn,[g(f(we),{value:T.value,"onUpdate:value":a[6]||(a[6]=n=>T.value=n),placeholder:"请输入背景图片URL",style:{width:"300px"}},null,8,["value"]),g(f(H),{type:"primary",size:"small",onClick:$e,class:"ml-2"},{default:p(()=>[j("添加")]),_:1})]),v("div",Qn,[b.value.length===0?(M(),P("div",eo,"暂无背景图片，请添加图片URL")):Ne("",!0),(M(!0),P(ie,null,pe(b.value,(n,A)=>(M(),P("div",{key:A,class:"background-image-item"},[v("div",to,[g(f(be),{src:n,width:"80",height:"45","object-fit":"contain"},null,8,["src"]),v("span",ao,E(n),1)]),g(f(H),{size:"small",type:"error",onClick:r=>U(A)},{default:p(()=>[j("删除")]),_:2},1032,["onClick"])]))),128))]),v("div",no,"当前背景图片数量: "+E(b.value.length),1)])]),_:1}),g(f(ee),{label:"缩略图"},{default:p(()=>[v("input",{type:"file",ref_key:"fileInputRef",ref:y,style:{display:"none"},accept:"image/*",onChange:Ie},null,544),v("div",{class:"upload-area",onClick:Se,onDragover:De,onDragenter:Oe,onDragleave:ge,onDrop:Le},[C.value.file?(M(),P("div",oo,[v("div",lo,[g(f(fe),{size:"24",class:"file-icon"},{default:p(()=>[g(f(Sn))]),_:1}),v("div",ro,E(C.value.name)+" ("+E(C.value.size)+"KB)",1)]),g(f(H),{size:"small",type:"error",onClick:Bt(ze,["stop"])},{default:p(()=>[j("移除")]),_:1})])):l.thumbnailPath&&!k.value?(M(),P("div",so,[g(f(be),{src:l.thumbnailPath,width:"200",height:"120","object-fit":"contain"},null,8,["src"])])):(M(),P("div",io,[g(f(fe),{size:"48",class:"upload-icon"},{default:p(()=>[g(f(Mn))]),_:1}),uo,co]))],32)]),_:1}),g(f(ee),{label:"使用应用工作流"},{default:p(()=>[g(f(Ke),{value:l.status,"onUpdate:value":a[7]||(a[7]=n=>l.status=n),"checked-value":1,"unchecked-value":0},{checked:p(()=>[j("启用")]),unchecked:p(()=>[j("禁用")]),_:1},8,["value"])]),_:1}),g(f(ee),{label:"需要AI补充文案"},{default:p(()=>[g(f(Ke),{value:l.needAiContent,"onUpdate:value":a[8]||(a[8]=n=>l.needAiContent=n),"checked-value":!0,"unchecked-value":!1},{checked:p(()=>[j("是")]),unchecked:p(()=>[j("否")]),_:1},8,["value"]),ho]),_:1})]),_:1}),v("div",fo,[g(f(H),{onClick:a[9]||(a[9]=n=>x.value=!1),class:"mr-2"},{default:p(()=>[j("取消")]),_:1}),g(f(H),{type:"primary",onClick:ve,loading:w.value},{default:p(()=>[j("确定")]),_:1},8,["loading"])])]),_:1},8,["show"])]),_:1},8,["show","title"]),g(f(Je),{show:D.value,"onUpdate:show":a[12]||(a[12]=n=>D.value=n),title:"HTML代码预览",preset:"card",style:{width:"800px"}},{default:p(()=>[v("div",go,[g(f(ln),{code:z.value,language:"html","show-line-numbers":"",style:{"max-height":"400px",overflow:"auto"}},null,8,["code"]),v("div",vo,[mo,v("iframe",{class:"html-preview-iframe",sandbox:"allow-same-origin allow-scripts",srcdoc:z.value},null,8,po)])]),v("div",wo,[g(f(H),{onClick:a[11]||(a[11]=n=>D.value=!1)},{default:p(()=>[j("关闭")]),_:1})])]),_:1},8,["show"])]))}}),Do=Vt(xo,[["__scopeId","data-v-ba367bc1"]]);export{Do as default};
