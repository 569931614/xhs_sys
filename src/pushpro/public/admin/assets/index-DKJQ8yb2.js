
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{d as D,g as M,c as O,e as S,r as u,bG as E,m as T,a as G,b as a,w as l,i as e,x as Q,R as m,h as f,U as n,S as H,T as L,bH as J,bO as W,bP as X,bQ as Y,l as Z}from"./index-CnisIzlN.js";import{u as ee,a as v,b as N,d as x}from"./use-message-DYMqPvJU.js";import{u as ae}from"./composables-D2s7nT97.js";import{N as k}from"./Icon-BI3nzoj7.js";import{S as te}from"./SearchOutlined-COBx1Us-.js";import{P as se}from"./PlusOutlined-Dxy3EoIJ.js";import{N as le,a as re,b as P}from"./DataTable-0DEKN-Ju.js";import{N as oe,a as z}from"./FormItem-DswOIw46.js";import{N as ne}from"./Popconfirm-DZJlR63j.js";const ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ce=S("path",{d:"M824.2 699.9a301.55 301.55 0 0 0-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200c-109.1 1.7-197 90.6-197 200c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 0 0-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 0 0 8 8.2h56c4.3 0 7.9-3.4 8-7.7c1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 0 1 612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 0 0 8-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 0 1-37.5-91.8c.3-32.8 13.4-64.5 36.3-88c24-24.6 56.1-38.3 90.4-38.7c33.9-.3 66.8 12.9 91 36.6c24.8 24.3 38.4 56.8 38.4 91.4c0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 0 1 612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4c0-15.9 1.5-31.4 4.3-46.5c.7-3.6-1.2-7.3-4.5-8.8c-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 0 1-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6c24.7-25.3 57.9-39.1 93.2-38.7c31.9.3 62.7 12.6 86 34.4c7.9 7.4 14.7 15.6 20.4 24.4c2 3.1 5.9 4.4 9.3 3.2c17.6-6.1 36.2-10.4 55.3-12.4c5.6-.6 8.8-6.6 6.3-11.6c-32.5-64.3-98.9-108.7-175.7-109.9c-110.9-1.7-203.3 89.2-203.3 199.9c0 62.8 28.9 118.8 74.2 155.5c-31.8 14.7-61.1 35-86.5 60.4c-54.8 54.7-85.8 126.9-87.8 204a8 8 0 0 0 8 8.2h56.1c4.3 0 7.9-3.4 8-7.7c1.9-58 25.4-112.3 66.7-153.5c29.4-29.4 65.4-49.8 104.7-59.7c3.9-1 6.5-4.7 6-8.7z",fill:"currentColor"},null,-1),ue=[ce],de=D({name:"TeamOutlined",render:function(i,g){return M(),O("svg",ie,ue)}}),pe={class:"user-type-container"},me={class:"white-bg-container"},fe={class:"data-table-wrapper"},ve=D({__name:"index",setup(A){const i=ee();ae();const g=u(""),h=E(()=>{c.page=1,p()},300),y=u([]),_=u(!1),w=u(!1),c=T({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,30,40]}),B=s=>s.status===0?"opacity-50":"",R=[{title:"类型名称",key:"name",width:200,render:t=>n("div",{class:"title-cell"},t.name)},{title:"描述",key:"description",width:300,render:t=>n("div",{class:"description-cell"},t.description||"-")},{title:"状态",key:"status",width:100,render:t=>{const o=t.status;return n(x,{type:o===1?"success":"error"},{default:()=>o===1?"启用":"禁用"})}},{title:"操作",key:"actions",width:200,render:t=>n(v,{},{default:()=>[n(m,{size:"small",onClick:()=>j(t)},{default:()=>"编辑"}),n(ne,{onPositiveClick:()=>F(t)},{trigger:()=>n(m,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除这个用户类型吗？"})]})}],d=u(!1),b=u(""),C=u(null),U={id:null,name:"",description:"",status:1},r=T({...U}),I={name:{required:!0,message:"请输入用户类型名称",trigger:"blur"}},p=async()=>{_.value=!0;try{const s=await J();s&&s.data&&s.data.data&&Array.isArray(s.data.data)&&(y.value=s.data.data,c.itemCount=s.data.data.length)}catch(s){console.error("加载数据出错:",s),i.error("获取数据失败："+(s.message||"未知错误")),y.value=[],c.itemCount=0}finally{_.value=!1}},$=()=>{Object.assign(r,U),b.value="添加用户类型",d.value=!0},j=s=>{Object.assign(r,s),b.value="编辑用户类型",d.value=!0},F=async s=>{if(s.id)try{await Y(s.id),i.success("删除成功"),p()}catch(t){console.error(t),i.error("删除失败")}},K=async()=>{C.value&&C.value.validate(async s=>{if(!s)try{w.value=!0,r.id?(await W(r.id,{id:r.id,name:r.name,description:r.description,status:r.status}),i.success("更新成功")):(await X({id:0,name:r.name,description:r.description,status:r.status}),i.success("添加成功")),d.value=!1,p()}catch(t){console.error(t),i.error("操作失败")}finally{w.value=!1}})},V=s=>{c.page=s,p()},q=s=>{c.pageSize=s,c.page=1,p()};return G(()=>{p()}),(s,t)=>(M(),O("div",pe,[S("div",me,[a(e(H),{title:"用户类型管理",bordered:!1,class:"page-card"},{"header-extra":l(()=>[a(e(v),null,{default:l(()=>[a(e(N),{value:g.value,"onUpdate:value":t[0]||(t[0]=o=>g.value=o),placeholder:"搜索用户类型名称",clearable:"",onClear:e(h),onKeyup:Q(e(h),["enter"]),class:"search-input"},{suffix:l(()=>[a(e(m),{type:"primary",text:"",onClick:e(h)},{icon:l(()=>[a(e(k),null,{default:l(()=>[a(e(te))]),_:1})]),_:1},8,["onClick"])]),_:1},8,["value","onClear","onKeyup"]),a(e(m),{type:"primary",onClick:$,class:"add-button"},{icon:l(()=>[a(e(k),null,{default:l(()=>[a(e(se))]),_:1})]),default:l(()=>[f(" 添加用户类型 ")]),_:1})]),_:1})]),default:l(()=>[S("div",fe,[a(e(le),{columns:e(R),data:y.value,loading:_.value,pagination:c,"row-class-name":B,"onUpdate:page":V,"onUpdate:pageSize":q,striped:"",empty:{description:"暂无数据，点击添加按钮创建新用户类型",icon:()=>n(e(k),{size:48},{default:()=>n(e(de))})},class:"custom-table"},null,8,["columns","data","loading","pagination","empty"])])]),_:1}),a(e(L),{show:d.value,"onUpdate:show":t[5]||(t[5]=o=>d.value=o),title:b.value,preset:"card",style:{width:"600px"},class:"custom-modal"},{footer:l(()=>[a(e(v),{justify:"end"},{default:l(()=>[a(e(m),{onClick:t[4]||(t[4]=o=>d.value=!1)},{default:l(()=>[f("取消")]),_:1}),a(e(m),{type:"primary",onClick:K,loading:w.value},{default:l(()=>[f("确定")]),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(e(oe),{ref_key:"formRef",ref:C,model:r,rules:I,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:l(()=>[a(e(z),{label:"类型名称",path:"name"},{default:l(()=>[a(e(N),{value:r.name,"onUpdate:value":t[1]||(t[1]=o=>r.name=o),placeholder:"请输入用户类型名称"},null,8,["value"])]),_:1}),a(e(z),{label:"描述信息",path:"description"},{default:l(()=>[a(e(N),{value:r.description,"onUpdate:value":t[2]||(t[2]=o=>r.description=o),type:"textarea",placeholder:"请输入描述信息"},null,8,["value"])]),_:1}),a(e(z),{label:"状态",path:"status"},{default:l(()=>[a(e(re),{value:r.status,"onUpdate:value":t[3]||(t[3]=o=>r.status=o)},{default:l(()=>[a(e(v),null,{default:l(()=>[a(e(P),{value:1},{default:l(()=>[a(e(x),{type:"success"},{default:l(()=>[f("启用")]),_:1})]),_:1}),a(e(P),{value:0},{default:l(()=>[a(e(x),{type:"error"},{default:l(()=>[f("禁用")]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])]))}}),ze=Z(ve,[["__scopeId","data-v-733979ea"]]);export{ze as default};
