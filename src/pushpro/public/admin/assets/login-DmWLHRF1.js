
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{d as K,O as j,r as n,c as q,e as i,z as B,P as F,i as t,b as e,w as s,Q as N,p as r,f as T,g as E,x as L,h,y as M,j as Q,k as v}from"./index-CnisIzlN.js";const W={class:"min-h-screen flex items-center justify-center bg-gray-100"},A={id:"login-box",class:"min-h-[60vh] min-w-[40vw] items-center rounded-lg bg-gray-50 p-6 shadow-lg"},D=i("div",{class:"mb-6 text-center"},[i("h3",{class:"text-xl text-gray-900 font-bold"}," 欢迎来到 小红薯矩阵宝 ")],-1),H={class:"mb-4 flex items-center justify-between"},O="QUlXZWI=",P=K({__name:"login",setup(X){var d;const w=N(),x=T(),y=j(),V="AIWeb",k=atob(O);if(!V.includes(k))throw document.body.innerHTML="<h1></h1>",new Error("");const S=n("login"),u=n(!1),z=n(((d=w.query.redirect)==null?void 0:d.toString())??"/"),m=n(),o=n({username:localStorage.login_username||"",password:"",remember:!!localStorage.login_username}),R=n({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function c(){m.value&&m.value.validate(p=>{p&&(u.value=!0,y.login(o.value).then(()=>{u.value=!1,o.value.remember?localStorage.setItem("login_username",o.value.username):localStorage.removeItem("login_username"),x.push(z.value)}).catch(()=>{u.value=!1}))})}return(p,l)=>{const _=Q,g=r("el-icon"),f=r("el-input"),b=r("el-form-item"),U=r("el-checkbox"),C=r("el-button"),I=r("el-form");return E(),q("div",W,[i("div",A,[B(e(I,{ref_key:"loginFormRef",ref:m,model:t(o),rules:t(R),class:"login-form mx-12 my-10",autocomplete:"on"},{default:s(()=>[D,i("div",null,[e(b,{prop:"username",class:"py-2"},{default:s(()=>[e(f,{modelValue:t(o).username,"onUpdate:modelValue":l[0]||(l[0]=a=>t(o).username=a),placeholder:"用户名",text:"",tabindex:"1",autocomplete:"on",size:"large",class:"h-10"},{prefix:s(()=>[e(g,null,{default:s(()=>[e(_,{name:"ep:user"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{prop:"password",class:"py-2"},{default:s(()=>[e(f,{modelValue:t(o).password,"onUpdate:modelValue":l[1]||(l[1]=a=>t(o).password=a),type:"password",placeholder:"密码",tabindex:"2",autocomplete:"on","show-password":"",size:"large",class:"h-10",onKeyup:L(c,["enter"])},{prefix:s(()=>[e(g,null,{default:s(()=>[e(_,{name:"ep:lock"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),i("div",H,[e(U,{modelValue:t(o).remember,"onUpdate:modelValue":l[2]||(l[2]=a=>t(o).remember=a),size:"large"},{default:s(()=>[h(" 记住我 ")]),_:1},8,["modelValue"])]),e(C,{loading:t(u),type:"primary",size:"large",class:"w-full",onClick:M(c,["prevent"])},{default:s(()=>[h(" 登录 ")]),_:1},8,["loading"])]),_:1},8,["model","rules"]),[[F,t(S)==="login"]])])])}}});typeof v=="function"&&v(P);export{P as default};
