
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{N as ve,c as me,d as ge}from"./DataTable-0DEKN-Ju.js";import{u as he,w as pe,a as be}from"./use-message-DYMqPvJU.js";import{d as j,a6 as E,au as H,n as h,bY as ye,ac as Y,bZ as F,b_ as X,b$ as J,ad as N,U as C,bw as oe,aw as ke,a5 as D,ax as Z,bn as Ce,aJ as U,aA as ie,r as b,aB as re,aC as _e,z as Re,P as Se,aI as je,E as A,ak as Pe,bK as we,F as K,bm as q,c0 as Oe,T as Be,c1 as G,c2 as Q,be as Ne,bt as Ae,m as Le,c3 as $e,c4 as Te,bh as xe,i as V,c5 as Ee,c6 as De,c7 as Ie,g as S,c as x,e as ze,M as ee,a as Me,c8 as Ke,l as se,p as B,b as $,c9 as le,s as de,w as R,Z as Ue,ca as Fe,cb as Ve,aq as qe,R as We,v as I,cc as He,h as ne,t as Ye,A as Xe,H as Je}from"./index-CnisIzlN.js";import{N as Ze}from"./Icon-BI3nzoj7.js";import{u as Ge}from"./composables-D2s7nT97.js";const Qe={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:{type:String,default:F},locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(oe("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},en=j({name:"ConfigProvider",alias:["App"],props:Qe,setup(e){const n=E(H,null),t=h(()=>{const{theme:i}=e;if(i===null)return;const p=n==null?void 0:n.mergedThemeRef.value;return i===void 0?p:p===void 0?i:Object.assign({},p,i)}),a=h(()=>{const{themeOverrides:i}=e;if(i!==null){if(i===void 0)return n==null?void 0:n.mergedThemeOverridesRef.value;{const p=n==null?void 0:n.mergedThemeOverridesRef.value;return p===void 0?i:ye({},p,i)}}}),s=Y(()=>{const{namespace:i}=e;return i===void 0?n==null?void 0:n.mergedNamespaceRef.value:i}),o=Y(()=>{const{bordered:i}=e;return i===void 0?n==null?void 0:n.mergedBorderedRef.value:i}),l=h(()=>{const{icons:i}=e;return i===void 0?n==null?void 0:n.mergedIconsRef.value:i}),r=h(()=>{const{componentOptions:i}=e;return i!==void 0?i:n==null?void 0:n.mergedComponentPropsRef.value}),c=h(()=>{const{clsPrefix:i}=e;return i!==void 0?i:n?n.mergedClsPrefixRef.value:F}),u=h(()=>{var i;const{rtl:p}=e;if(p===void 0)return n==null?void 0:n.mergedRtlRef.value;const _={};for(const g of p)_[g.name]=X(g),(i=g.peers)===null||i===void 0||i.forEach(w=>{w.name in _||(_[w.name]=X(w))});return _}),d=h(()=>e.breakpoints||(n==null?void 0:n.mergedBreakpointsRef.value)),f=e.inlineThemeDisabled||(n==null?void 0:n.inlineThemeDisabled),y=e.preflightStyleDisabled||(n==null?void 0:n.preflightStyleDisabled),L=h(()=>{const{value:i}=t,{value:p}=a,_=p&&Object.keys(p).length!==0,g=i==null?void 0:i.name;return g?_?`${g}-${J(JSON.stringify(a.value))}`:g:_?J(JSON.stringify(a.value)):""});return N(H,{mergedThemeHashRef:L,mergedBreakpointsRef:d,mergedRtlRef:u,mergedIconsRef:l,mergedComponentPropsRef:r,mergedBorderedRef:o,mergedNamespaceRef:s,mergedClsPrefixRef:c,mergedLocaleRef:h(()=>{const{locale:i}=e;if(i!==null)return i===void 0?n==null?void 0:n.mergedLocaleRef.value:i}),mergedDateLocaleRef:h(()=>{const{dateLocale:i}=e;if(i!==null)return i===void 0?n==null?void 0:n.mergedDateLocaleRef.value:i}),mergedHljsRef:h(()=>{const{hljs:i}=e;return i===void 0?n==null?void 0:n.mergedHljsRef.value:i}),mergedKatexRef:h(()=>{const{katex:i}=e;return i===void 0?n==null?void 0:n.mergedKatexRef.value:i}),mergedThemeRef:t,mergedThemeOverridesRef:a,inlineThemeDisabled:f||!1,preflightStyleDisabled:y||!1}),{mergedClsPrefix:c,mergedBordered:o,mergedNamespace:s,mergedTheme:t,mergedThemeOverrides:a}},render(){var e,n,t,a;return this.abstract?(a=(t=this.$slots).default)===null||a===void 0?void 0:a.call(t):C(this.as||this.tag,{class:`${this.mergedClsPrefix||F}-config-provider`},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}}),nn=e=>{const{primaryColor:n,errorColor:t}=e;return{colorError:t,colorLoading:n,height:"2px"}},tn={name:"LoadingBar",common:ke,self:nn},ue=D("n-loading-bar"),ce=D("n-loading-bar-api"),an=Z("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[Ce({enterDuration:"0.3s",leaveDuration:"0.8s"}),Z("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[U("starting",`
 background: var(--n-color-loading);
 `),U("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),U("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var z=function(e,n,t,a){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function r(d){try{u(a.next(d))}catch(f){l(f)}}function c(d){try{u(a.throw(d))}catch(f){l(f)}}function u(d){d.done?o(d.value):s(d.value).then(r,c)}u((a=a.apply(e,n||[])).next())})};function M(e,n){return`${n}-loading-bar ${n}-loading-bar--${e}`}const on=j({name:"LoadingBar",props:{containerClass:String,containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:e}=ie(),{props:n,mergedClsPrefixRef:t}=E(ue),a=b(null),s=b(!1),o=b(!1),l=b(!1),r=b(!1);let c=!1;const u=b(!1),d=h(()=>{const{loadingBarStyle:m}=n;return m?m[u.value?"error":"loading"]:""});function f(){return z(this,void 0,void 0,function*(){s.value=!1,l.value=!1,c=!1,u.value=!1,r.value=!0,yield A(),r.value=!1})}function y(m=0,T=80,P="starting"){return z(this,void 0,void 0,function*(){if(o.value=!0,yield f(),c)return;l.value=!0,yield A();const O=a.value;O&&(O.style.maxWidth=`${m}%`,O.style.transition="none",O.offsetWidth,O.className=M(P,t.value),O.style.transition="",O.style.maxWidth=`${T}%`)})}function L(){return z(this,void 0,void 0,function*(){if(c||u.value)return;o.value&&(yield A()),c=!0;const m=a.value;m&&(m.className=M("finishing",t.value),m.style.maxWidth="100%",m.offsetWidth,l.value=!1)})}function i(){if(!(c||u.value))if(!l.value)y(100,100,"error").then(()=>{u.value=!0;const m=a.value;m&&(m.className=M("error",t.value),m.offsetWidth,l.value=!1)});else{u.value=!0;const m=a.value;if(!m)return;m.className=M("error",t.value),m.style.maxWidth="100%",m.offsetWidth,l.value=!1}}function p(){s.value=!0}function _(){s.value=!1}function g(){return z(this,void 0,void 0,function*(){yield f()})}const w=re("LoadingBar","-loading-bar",an,tn,n,t),v=h(()=>{const{self:{height:m,colorError:T,colorLoading:P}}=w.value;return{"--n-height":m,"--n-color-loading":P,"--n-color-error":T}}),k=e?_e("loading-bar",void 0,v,n):void 0;return{mergedClsPrefix:t,loadingBarRef:a,started:o,loading:l,entering:s,transitionDisabled:r,start:y,error:i,finish:L,handleEnter:p,handleAfterEnter:_,handleAfterLeave:g,mergedLoadingBarStyle:d,cssVars:e?void 0:v,themeClass:k==null?void 0:k.themeClass,onRender:k==null?void 0:k.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:e}=this;return C(je,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var n;return(n=this.onRender)===null||n===void 0||n.call(this),Re(C("div",{class:[`${e}-loading-bar-container`,this.themeClass,this.containerClass],style:this.containerStyle},C("div",{ref:"loadingBarRef",class:[`${e}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[Se,this.loading||!this.loading&&this.entering]])}})}}),rn=Object.assign(Object.assign({},re.props),{to:{type:[String,Object,Boolean],default:void 0},containerClass:String,containerStyle:[String,Object],loadingBarStyle:{type:Object}}),sn=j({name:"LoadingBarProvider",props:rn,setup(e){const n=Pe(),t=b(null),a={start(){var o;n.value?(o=t.value)===null||o===void 0||o.start():A(()=>{var l;(l=t.value)===null||l===void 0||l.start()})},error(){var o;n.value?(o=t.value)===null||o===void 0||o.error():A(()=>{var l;(l=t.value)===null||l===void 0||l.error()})},finish(){var o;n.value?(o=t.value)===null||o===void 0||o.finish():A(()=>{var l;(l=t.value)===null||l===void 0||l.finish()})}},{mergedClsPrefixRef:s}=ie(e);return N(ce,a),N(ue,{props:e,mergedClsPrefixRef:s}),Object.assign(a,{loadingBarRef:t})},render(){var e,n;return C(K,null,C(we,{disabled:this.to===!1,to:this.to||"body"},C(on,{ref:"loadingBarRef",containerStyle:this.containerStyle,containerClass:this.containerClass})),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function ln(){const e=E(ce,null);return e===null&&q("use-loading-bar","No outer <n-loading-bar-provider /> founded."),e}const dn=j({name:"ModalEnvironment",props:Object.assign(Object.assign({},Oe),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=b(!0);function t(){const{onInternalAfterLeave:d,internalKey:f,onAfterLeave:y}=e;d&&d(f),y&&y()}function a(){const{onPositiveClick:d}=e;d?Promise.resolve(d()).then(f=>{f!==!1&&c()}):c()}function s(){const{onNegativeClick:d}=e;d?Promise.resolve(d()).then(f=>{f!==!1&&c()}):c()}function o(){const{onClose:d}=e;d?Promise.resolve(d()).then(f=>{f!==!1&&c()}):c()}function l(d){const{onMaskClick:f,maskClosable:y}=e;f&&(f(d),y&&c())}function r(){const{onEsc:d}=e;d&&d()}function c(){n.value=!1}function u(d){n.value=d}return{show:n,hide:c,handleUpdateShow:u,handleAfterLeave:t,handleCloseClick:o,handleNegativeClick:s,handlePositiveClick:a,handleMaskClick:l,handleEsc:r}},render(){const{handleUpdateShow:e,handleAfterLeave:n,handleMaskClick:t,handleEsc:a,show:s}=this;return C(Be,Object.assign({},this.$props,{show:s,onUpdateShow:e,onMaskClick:t,onEsc:a,onAfterLeave:n,internalAppear:!0,internalModal:!0}))}}),te=D("n-modal-provider"),fe=D("n-modal-api"),un=D("n-modal-reactive-list"),cn={to:[String,Object]},fn=j({name:"ModalProvider",props:cn,setup(){const e=G(64),n=Q(),t=b([]),a={};function s(c={}){const u=Ae(),d=Le(Object.assign(Object.assign({},c),{key:u,destroy:()=>{a[`n-modal-${u}`].hide()}}));return t.value.push(d),d}function o(c){const{value:u}=t;u.splice(u.findIndex(d=>d.key===c),1)}function l(){Object.values(a).forEach(c=>{c.hide()})}const r={create:s,destroyAll:l};return N(fe,r),N(te,{clickedRef:G(64),clickedPositionRef:Q()}),N(un,t),N(te,{clickedRef:e,clickedPositionRef:n}),Object.assign(Object.assign({},r),{modalList:t,modalInstRefs:a,handleAfterLeave:o})},render(){var e,n;return C(K,null,[this.modalList.map(t=>{var a;return C(dn,Ne(t,["destroy","style"],{internalStyle:t.style,to:(a=t.to)!==null&&a!==void 0?a:this.to,ref:s=>{s===null?delete this.modalInstRefs[`n-modal-${t.key}`]:this.modalInstRefs[`n-modal-${t.key}`]=s},internalKey:t.key,onInternalAfterLeave:this.handleAfterLeave}))}),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}});function vn(){const e=E(fe,null);return e===null&&q("use-modal","No outer <n-modal-provider /> founded."),e}function mn(){const e=E($e,null);return e===null&&q("use-notification","No outer `n-notification-provider` found."),e}const gn=j({name:"InjectionExtractor",props:{onSetup:Function},setup(e,{slots:n}){var t;return(t=e.onSetup)===null||t===void 0||t.call(e),()=>{var a;return(a=n.default)===null||a===void 0?void 0:a.call(n)}}}),hn={message:he,notification:mn,loadingBar:ln,dialog:Ge,modal:vn};function pn({providersAndProps:e,configProviderProps:n}){let a=Te(()=>C(en,V(n),{default:()=>e.map(({type:r,Provider:c,props:u})=>C(c,V(u),{default:()=>C(gn,{onSetup:()=>s[r]=hn[r]()})}))}));const s={app:a};let o;return xe&&(o=document.createElement("div"),document.body.appendChild(o),a.mount(o)),Object.assign({unmount:()=>{var r;if(a===null||o===null){oe("discrete","unmount call no need because discrete app has been unmounted");return}a.unmount(),(r=o.parentNode)===null||r===void 0||r.removeChild(o),o=null,a=null}},s)}function bn(e,{configProviderProps:n,messageProviderProps:t,dialogProviderProps:a,notificationProviderProps:s,loadingBarProviderProps:o,modalProviderProps:l}={}){const r=[];return e.forEach(u=>{switch(u){case"message":r.push({type:u,Provider:Ie,props:t});break;case"notification":r.push({type:u,Provider:De,props:s});break;case"dialog":r.push({type:u,Provider:Ee,props:a});break;case"loadingBar":r.push({type:u,Provider:sn,props:o});break;case"modal":r.push({type:u,Provider:fn,props:l})}}),pn({providersAndProps:r,configProviderProps:n})}const yn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},kn=ze("path",{fill:"currentColor",d:"M456 231a56 56 0 1 0 112 0a56 56 0 1 0-112 0zm0 280a56 56 0 1 0 112 0a56 56 0 1 0-112 0zm0 280a56 56 0 1 0 112 0a56 56 0 1 0-112 0z"},null,-1),Cn=[kn],_n=j({name:"MoreOutlined",render:function(n,t){return S(),x("svg",yn,Cn)}}),Rn=j({name:"BasicTable",components:{NDataTable:ve,NEllipsis:me,NEmpty:pe},props:{columns:{type:Array,default:()=>[]},request:{type:Function,default:null},rowKey:{type:[String,Function],default:"id"},pagination:{type:[Object,Boolean],default:()=>({})},actionColumn:{type:Object,default:null},scrollX:{type:Number,default:0},scrollY:{type:Number,default:0},params:{type:Object,default:()=>({})}},emits:["update:checked-row-keys"],setup(e,{emit:n,attrs:t,expose:a}){const s=b(null),o=b(!1),l=b([]),r=h(()=>e.pagination===!1?!1:Object.assign({},{page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,30,40,50],onChange:k=>{typeof r.value=="object"&&(r.value.page=k)},onUpdatePageSize:k=>{typeof r.value=="object"&&(r.value.pageSize=k,r.value.page=1)},prefix:({itemCount:k})=>`共 ${k} 条`},e.pagination)),c=h(()=>{const v={...t,rowKey:e.rowKey,bordered:!0,size:"medium",remote:!0};return e.scrollX&&(v.scrollX=e.scrollX),e.scrollY&&(v.scrollY=e.scrollY),v}),u=h(()=>{const v=[...e.columns];return e.actionColumn&&v.push(e.actionColumn),v}),d=b([]);ee(()=>u.value,()=>{d.value=Ke(u.value)},{immediate:!0}),ee(()=>e.params,()=>{g()},{deep:!0});const f=b({}),y=b({});function L(v){f.value=v,g()}function i(v){y.value=v,g()}function p(v){typeof r.value=="object"&&(r.value.page=v,g())}function _(v){typeof r.value=="object"&&(r.value.pageSize=v,r.value.page=1,g())}async function g(){if(e.request)try{o.value=!0;const v=V(r),k=typeof v=="object"?v.page:1,m=typeof v=="object"?v.pageSize:10;let T={page:k,pageSize:m,...e.params,...f.value,...y.value};const P=await e.request(T);P&&(l.value=P.items||[],typeof r.value=="object"&&P.total!==void 0&&(r.value.itemCount=P.total))}finally{o.value=!1}}function w(){typeof r.value=="object"&&(r.value.page=1),g()}return Me(()=>{A(()=>{g()})}),a({reload:w,fetch:g}),{tableRef:s,loading:o,data:l,columns:d,pagination:r,getBindValues:c,handleSorter:L,handleFilter:i,handlePageChange:p,handlePageSizeChange:_}}}),Sn={class:"basic-table"};function jn(e,n,t,a,s,o){const l=B("n-empty"),r=B("n-data-table");return S(),x("div",Sn,[$(r,qe({ref:"tableRef"},e.getBindValues,{loading:e.loading,columns:e.columns,data:e.data,pagination:e.pagination,"onUpdate:sorter":e.handleSorter,"onUpdate:filters":e.handleFilter,"onUpdate:page":e.handlePageChange,"onUpdate:pageSize":e.handlePageSizeChange}),le({empty:R(()=>[$(l,{description:"暂无数据"})]),_:2},[de(Object.keys(e.$slots),c=>({name:c,fn:R(u=>[Ue(e.$slots,c,Fe(Ve(u||{})),void 0,!0)])}))]),1040,["loading","columns","data","pagination","onUpdate:sorter","onUpdate:filters","onUpdate:page","onUpdate:pageSize"])])}const Tn=se(Rn,[["render",jn],["__scopeId","data-v-b0ad6f0a"]]),Pn=j({name:"TableAction",components:{NButton:We,NSpace:be,NDropdown:ge,NIcon:Ze,MoreOutlined:_n},props:{style:{type:String,default:"dropdown",validator:e=>["button","dropdown"].includes(e)},actions:{type:Array,default:()=>[]}},setup(e){const n=h(()=>e.actions.filter(s=>!s.show||s.show()).map((s,o)=>({key:o,label:s.label,disabled:!!s.disabled})));function t(s){s.onClick&&typeof s.onClick=="function"&&s.onClick()}function a(s){const o=e.actions[s];o&&o.onClick&&typeof o.onClick=="function"&&o.onClick()}return{dropdownOptions:n,handleAction:t,handleSelect:a}}}),wn={class:"table-action"};function On(e,n,t,a,s,o){const l=B("n-icon"),r=B("n-button"),c=B("n-space"),u=B("more-outlined"),d=B("n-dropdown");return S(),x("div",wn,[e.style==="button"?(S(),I(c,{key:0},{default:R(()=>[(S(!0),x(K,null,de(e.actions,(f,y)=>(S(),x(K,{key:y},[!f.show||f.show()?(S(),I(r,{key:0,type:f.type||"default",size:f.size||"small",onClick:L=>e.handleAction(f),disabled:!!f.disabled},le({default:R(()=>[ne(" "+Ye(f.label),1)]),_:2},[f.icon?{name:"icon",fn:R(()=>[$(l,null,{default:R(()=>[(S(),I(He(f.icon)))]),_:2},1024)]),key:"0"}:void 0]),1032,["type","size","onClick","disabled"])):Xe("",!0)],64))),128))]),_:1})):(S(),I(d,{key:1,options:e.dropdownOptions,onSelect:e.handleSelect,disabled:e.dropdownOptions.length===0},{default:R(()=>[$(r,{size:"small"},{icon:R(()=>[$(l,null,{default:R(()=>[$(u)]),_:1})]),default:R(()=>[ne(" 更多 ")]),_:1})]),_:1},8,["options","onSelect","disabled"]))])}const xn=se(Pn,[["render",On],["__scopeId","data-v-6b50399b"]]),{message:ae}=bn(["message"]),W=Je.create({baseURL:"/api",timeout:3e4});W.interceptors.request.use(e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));W.interceptors.response.use(e=>{const n=e.data;return n.code!==0&&n.code!==200?(ae.error(n.message||"请求失败"),Promise.reject(new Error(n.message||"请求失败"))):n.data},e=>{var t,a;console.error("响应错误:",e);const n=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||e.message||"请求失败";return ae.error(n),Promise.reject(e)});function En(e){return W(e)}export{Tn as B,xn as T,En as r};
