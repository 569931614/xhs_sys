# 小红书笔记自动创建工具

这个工具用于通过API自动创建小红书笔记，并获取分享链接和二维码链接。

## 使用说明

### 安装依赖

使用前请先安装必要的依赖：

```bash
npm install axios
```

### 运行脚本

```bash
node create-xhs-note.js
```

### 功能说明

脚本会向 `http://ai.bbbzd.cn/api/xhs-auto/notes` 发送POST请求，创建一篇小红书笔记，请求成功后会返回分享链接和二维码链接。

### 参数说明

请求参数结构：
- `title`: 笔记标题
- `content`: 笔记内容
- `images`: 图片链接数组
- `type`: 笔记类型（normal或video）
- `userId`: 用户ID
- `identifier`: 标识符

### 返回结果

脚本会提取API返回结果中的以下信息：
- `shareLink`: 笔记分享链接
- `qrcodeLink`: 笔记二维码链接

## 自定义配置

如需修改笔记内容，请编辑脚本中的`requestData`对象。

## 账号分析功能优化

### 暗色模式显示优化
- 增强了IP内容部分在暗色模式下的可见性
- 添加了特定CSS样式规则，确保文本在暗色背景下清晰可读
- 修复了标题、强调文本等在暗色模式下的颜色对比度问题

### IP分析内容展示优化
- 添加了ip_html_content字段存储HTML格式的分析结果
- 优先使用HTML格式内容展示，提供更好的视觉体验
- 改进了内容区域的样式，提高了信息展示的结构化程度

### 任务处理优化
- 实现异步刷新任务状态，不阻塞用户界面
- 获取任务列表时排除长文本字段，减少数据传输量
- 添加自动刷新功能，每2分钟自动刷新进行中的任务
- 改进UI交互，在任务进行中时只显示刷新按钮

### 相同链接任务处理
- 添加检测同一天内相同链接任务的功能
- 实现getCleanUrl方法处理URL，去除参数部分只比较基础URL
- 当发现相同链接任务时，复制已有任务数据而不重新创建

### 错误修复
- 修复了"onFailure is not a function"错误
- 改进错误处理，添加了try/catch和可选链操作符
- 优化了组件卸载时的资源清理逻辑，防止内存泄漏
- 修复了响应处理中的空值检查问题
